var defaultChecklist=ONE_ELEMENT(".defaultChecklistExibition"),defaultChecklistArray=JSON.parse(ONE_ELEMENT("#defaultChecklistArray").value),typeChecklistArray=["Agrupamento","Texto","Upload","Multiplas Escolhas","Dupla Escolha","Numerica","Data","Agrupamento (dupla escolha)","Maior que/Menor que"],optionsDefaultChecklist=ONE_ELEMENT(".optionsDefaultChecklistExibition"),formChecklist=ONE_ELEMENT("#formChecklist");function showDefaultChecklist(e,t=null){e.map(e=>{let i=defaultChecklist.cloneNode(!0);i.style.display="flex",fillInputsAndAttributeDefaultChecklist(i,e),appendDefaultChecklist(i,t),appendOptions(e,i),repeatLoopShowDefaultChecklist(e,i),i.querySelector(".btnSeeMoreCheck").setAttribute("id",e.id)})}function fillInputsAndAttributeDefaultChecklist(e,t){e.setAttribute("idElement",t.id),e.setAttribute("id","defaultCheck"+t.id),e.querySelector(".nameChecklist").innerHTML=t.name,e.querySelector(".nameChecklist").setAttribute("title",t.name),e.querySelector(".typeChecklist").innerHTML="Tipo: "+typeChecklistArray[t.id_type_checklist],e.querySelector(".typeChecklist").setAttribute("title","Tipo: "+typeChecklistArray[t.id_type_checklist]),e.querySelector(".pointsPercentage").innerHTML=t.percentage.toFixed(2)+"%",e.querySelector(".pointsPercentage").setAttribute("title",t.percentage+"%"),e.querySelector(".points").innerHTML="Pontos: "+t.points.toFixed(2),e.querySelector(".points").setAttribute("title",t.points),e.querySelector(".observation").innerHTML=""===t.observation?"Nenhuma observação":t.observation,e.querySelector(".observation").setAttribute("title",t.observation)}function appendOptions(e,t){e.options.length>0&&(t.querySelector(".btnOptions").style.display="block",t.querySelector(".btnOptions").setAttribute("id",e.id))}function appendDefaultChecklist(e,t){null===t?ONE_ELEMENT(".checklistContent").append(e):t.querySelector(".defaultChecklist__container").append(e)}function repeatLoopShowDefaultChecklist(e,t=null){e.subchecklist.length>0&&(t.querySelector(".btnSeeMore").style.display="block",showDefaultChecklist(e.subchecklist,t))}function eventsBtnSeeOption(){[...ALL_ELEMENTS(".checklistContent .btnOptions")].forEach(e=>{e.addEventListener("click",e=>{let t=parseInt(e.currentTarget.getAttribute("id"));openModal(filterDefaultChecklist(defaultChecklistArray.subchecklist,t,{}).options)})})}function openModal(e){ONE_ELEMENT("#modalActions").querySelector(".modal-body").innerHTML="",ONE_ELEMENT("#modalActions").querySelector(".modal-title").innerHTML="Opções da checklist",ONE_ELEMENT("#btnAddModal").style.display="none",ONE_ELEMENT("#btnEditModal").style.display="none",e.forEach(e=>{let t=optionsDefaultChecklist.cloneNode(!0);t.querySelector(".optionName").innerHTML=e.name,t.querySelector(".optionPercentage").innerHTML=e.percentage+"%",t.querySelector(".optionPoints").innerHTML="Pontos: "+e.points.toFixed(2),t.style.display="flex",ONE_ELEMENT("#modalActions").querySelector(".modal-body").append(t)})}function eventsBtnSeeMore(){[...ALL_ELEMENTS(".checklistContent .btnSeeMore")].forEach(e=>{e.addEventListener("click",e=>{showSubchecklistContainer(e.currentTarget.closest(".defaultChecklistExibition"))})})}function eventsBtnSeeMoreCheck(){[...ALL_ELEMENTS(".checklistContent .btnSeeMoreCheck")].forEach(e=>{e.addEventListener("click",e=>{let t=parseInt(e.currentTarget.getAttribute("id"));openModalChecklist(filterDefaultChecklist(defaultChecklistArray.subchecklist,t,{}))})})}function openModalChecklist(e){ONE_ELEMENT("#modalActions").querySelector(".modal-body").innerHTML="",ONE_ELEMENT("#modalActions").querySelector(".modal-title").innerHTML="Detalhes Checklist",ONE_ELEMENT("#btnAddModal").style.display="none",ONE_ELEMENT("#btnEditModal").style.display="none",formChecklist.querySelector(".nameChecklist").innerHTML=e.name,formChecklist.querySelector(".typeChecklist").innerHTML="Tipo: "+typeChecklistArray[e.id_type_checklist],formChecklist.querySelector(".pointsPercentageChecklist").innerHTML=e.percentage+"%",formChecklist.querySelector(".pointsChecklist").innerHTML="Pontos: "+e.points,formChecklist.querySelector(".observationChecklist").innerHTML=""===e.observation?"Nenhuma observação":e.observation,formChecklist.style.display="block",ONE_ELEMENT("#modalActions").querySelector(".modal-body").append(formChecklist)}function showSubchecklistContainer(e){let t=parseInt(e.getAttribute("idElement")),i=filterDefaultChecklist(defaultChecklistArray.subchecklist,t,{});if(e.classList.contains("active"))e.style.height="65px",e.classList.remove("active"),i.active=!1;else{let t=e.querySelectorAll(".checklistContent .defaultChecklistExibition").length,l=65+65*t+35*t;e.style.height=l+"px",e.classList.add("active"),i.active=!0}}function showSubchecklistContainerLoop(e){e.forEach(e=>{let t=ONE_ELEMENT("#defaultCheck"+e.id);if(e.active){let i=e.subchecklist.length,l=65+65*i+35*i;t.style.height=l+"px",t.classList.add("active"),t.active=!0,e.subchecklist>0&&increaseDefaultChecklistFather(e)}else t.style.height="65px",t.classList.remove("active"),t.active=!1;e.subchecklist.length>0&&showSubchecklistContainerLoop(e.subchecklist)})}function increaseDefaultChecklistFather(e,t=65){let i=ONE_ELEMENT("#defaultCheck"+e.id),l=i.offsetHeight;if(t>65&&(i.style.height=l+t+"px"),null!=e.idDefaultChecklist){let i=filterDefaultChecklist(defaultChecklistArray.subchecklist,e.idDefaultChecklist,{}),l=e.subchecklist.length;increaseDefaultChecklistFather(i,65+65*l+35*l+t)}}function filterDefaultChecklist(e,t,i){let l=i;return e.forEach(e=>{e.id===t?l=e:e.subchecklist!=[]&&(l=filterDefaultChecklist(e.subchecklist,t,l))}),l}showDefaultChecklist(defaultChecklistArray.subchecklist),eventsBtnSeeMore(),eventsBtnSeeOption(),eventsBtnSeeMoreCheck();