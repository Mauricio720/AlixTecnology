var checklist=ONE_ELEMENT(".checklistExibition"),checklistArray=JSON.parse(ONE_ELEMENT("#checklistArray").value),typeChecklistArray=["Agrupamento","Texto","Upload","Multiplas Escolhas","Dupla Escolha","Numerica","Data"],optionsChecklist=ONE_ELEMENT(".optionsChecklistExibition"),formChecklist=ONE_ELEMENT("#formChecklistExibition");function showChecklist(e,t=null){e.map(e=>{let i=checklist.cloneNode(!0);i.style.display="flex",0!==e.id_type_checklist&&3!==e.id_type_checklist&&4!==e.id_type_checklist||i.querySelector(".checklist__slot--value").remove(),fillInputsAndAttributeChecklist(i,e),appendChecklist(i,t),appendOptions(e,i),repeatLoopShowChecklist(e,i),i.querySelector(".btnSeeMoreCheck").setAttribute("id",e.id)})}function fillInputsAndAttributeChecklist(e,t){if(e.setAttribute("idElement",t.id),e.setAttribute("id","check"+t.id),e.style.height="100px",e.querySelector(".checklist__title").innerHTML=t.name,e.querySelector(".checklist__title").setAttribute("title",t.name),2===t.id_type_checklist){let i=e.querySelector(".valueChecklist").querySelector("a");i.style.display="block",i.innerHTML="Download: "+t.name,i.setAttribute("href",BASE_URL+"/storage/checklists_files/"+t.file_name)}else 0!==t.id_type_checklist&&3!==t.id_type_checklist&&4!==t.id_type_checklist&&(e.querySelector(".valueChecklist").innerHTML=t.value);e.querySelector(".typeChecklist").innerHTML="Tipo: "+typeChecklistArray[t.id_type_checklist],e.querySelector(".typeChecklist").setAttribute("title",typeChecklistArray[t.id_type_checklist]),e.querySelector(".points").innerHTML="Pontos Possiveis: "+t.points,e.querySelector(".points").setAttribute("title",t.points),e.querySelector(".pointsObtained").innerHTML="Pontos Obtidos: "+t.pointsObtained,e.querySelector(".pointsObtained").setAttribute("title",t.pointsObtained),e.querySelector(".observation").innerHTML=""===t.observation?"Nenhuma observação":t.observation,e.querySelector(".observation").setAttribute("title",t.observation)}function appendOptions(e,t){e.options.length>0&&(t.querySelector(".btnOptions").style.display="block",t.querySelector(".btnOptions").setAttribute("id",e.id))}function appendChecklist(e,t){null===t?ONE_ELEMENT(".checklistContent").append(e):t.querySelector(".checklist__container").append(e)}function repeatLoopShowChecklist(e,t=null){e.subchecklist.length>0&&(t.querySelector(".btnSeeMore").style.display="block",showChecklist(e.subchecklist,t))}function eventsBtnSeeOption(){[...ALL_ELEMENTS(".checklistContent .btnOptions")].forEach(e=>{e.addEventListener("click",e=>{let t=parseInt(e.currentTarget.getAttribute("id"));openModal(filterChecklist(checklistArray.subchecklist,t,{}).options)})})}function openModal(e){ONE_ELEMENT("#modalActions").querySelector(".modal-body").innerHTML="",ONE_ELEMENT("#modalActions").querySelector(".modal-title").innerHTML="Opções da checklist",ONE_ELEMENT("#btnAddModal").style.display="none",ONE_ELEMENT("#btnEditModal").style.display="none",e.forEach(e=>{let t=optionsChecklist.cloneNode(!0);t.querySelector(".optionName").innerHTML=e.name,t.querySelector(".optionSelected").innerHTML=e.selected?"Sim":"Não",t.querySelector(".optionPointsObtained").innerHTML=e.pointsObtained,t.querySelector(".optionPoints").innerHTML=e.points,t.style.display="flex",ONE_ELEMENT("#modalActions").querySelector(".modal-body").append(t)})}function eventsBtnSeeMore(){[...ALL_ELEMENTS(".checklistContent .btnSeeMore")].forEach(e=>{e.addEventListener("click",e=>{showSubchecklistContainer(e.currentTarget.closest(".checklistExibition"))})})}function eventsBtnSeeMoreCheck(){[...ALL_ELEMENTS(".checklistContent .btnSeeMoreCheck")].forEach(e=>{e.addEventListener("click",e=>{let t=parseInt(e.currentTarget.getAttribute("id"));openModalChecklist(filterChecklist(checklistArray.subchecklist,t,{}))})})}function openModalChecklist(e){if(ONE_ELEMENT("#modalActions").querySelector(".modal-body").innerHTML="",ONE_ELEMENT("#modalActions").querySelector(".modal-title").innerHTML="Detalhes Checklist",ONE_ELEMENT("#btnAddModal").style.display="none",ONE_ELEMENT("#btnEditModal").style.display="none",formChecklist.querySelector(".nameChecklist").innerHTML=e.name,formChecklist.querySelector(".typeChecklist").innerHTML=typeChecklistArray[e.id_type_checklist],2===e.id_type_checklist){let t=formChecklist.querySelector(".valueChecklist").querySelector("a");t.style.display="block",t.innerHTML="Download: "+e.name,t.setAttribute("href",BASE_URL+"/storage/checklists_files/"+e.file_name)}else 0!==e.id_type_checklist&&3!==e.id_type_checklist&&4!==e.id_type_checklist?formChecklist.querySelector(".valueChecklist").innerHTML=e.value:formChecklist.querySelector(".valueChecklist").closest(".form-group").style.display="none";formChecklist.querySelector(".pointsChecklist").innerHTML="Pontos: "+e.points,formChecklist.querySelector(".pointsObtainedChecklist").innerHTML=e.pointsObtained,formChecklist.querySelector(".observationChecklist").innerHTML=""===e.observation?"Nenhuma observação":e.observation,formChecklist.style.display="block",ONE_ELEMENT("#modalActions").querySelector(".modal-body").append(formChecklist)}function showSubchecklistContainer(e){let t=parseInt(e.getAttribute("idElement")),i=filterChecklist(checklistArray.subchecklist,t,{});if(e.classList.contains("active"))e.style.height="100px",e.classList.remove("active"),i.active=!1;else{let t=e.querySelectorAll(".checklistContent .checklistExibition").length,l=100+100*t+35*t;e.style.height=l+"px",e.classList.add("active"),i.active=!0}}function showSubchecklistContainerLoop(e){e.forEach(e=>{let t=ONE_ELEMENT("#check"+e.id);if(e.active){let i=t.querySelectorAll(".checklistContent .checklistExibition").length,l=100+100*i+35*i;t.style.height=l+"px",t.classList.add("active"),e.active=!0}else defaultChecklistElement.style.height="65px",defaultChecklistElement.classList.remove("active"),e.active=!1;e.subchecklist.length>0&&showSubchecklistContainerLoop(e.subchecklist)})}function increaseDefaultChecklistFather(e,t=65){let i=ONE_ELEMENT("#check"+e.id),l=i.offsetHeight;if(t>65&&(i.style.height=l+t+"px"),null!=e.idDefaultChecklist){let i=filterChecklist(checklistArray.subchecklist,e.idDefaultChecklist,{}),l=e.subchecklist.length;increaseDefaultChecklistFather(i,65+65*l+35*l+t)}}function filterChecklist(e,t,i){let l=i;return e.forEach(e=>{e.id===t?l=e:e.subchecklist!=[]&&(l=filterChecklist(e.subchecklist,t,l))}),l}showChecklist(checklistArray.subchecklist),eventsBtnSeeMore(),eventsBtnSeeOption(),eventsBtnSeeMoreCheck();