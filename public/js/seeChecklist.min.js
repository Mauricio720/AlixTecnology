var checklist=ONE_ELEMENT(".checklistExibition"),checklistArray=JSON.parse(ONE_ELEMENT("#checklistArray").value),typeChecklistArray=["Agrupamento","Texto","Upload","Multiplas Escolhas","Dupla Escolha","Numerica","Data","Agrupamento (dupla escolha)"],optionsChecklist=ONE_ELEMENT(".optionsChecklistExibition"),downloadChecklistItem=ONE_ELEMENT(".download__item"),formChecklist=ONE_ELEMENT("#formChecklistExibition");function showChecklist(e,t=null){e.map(e=>{let l=checklist.cloneNode(!0);l.style.display="flex",0!==e.id_type_checklist&&3!==e.id_type_checklist&&4!==e.id_type_checklist||l.querySelector(".checklist__slot--value").remove(),fillInputsAndAttributeChecklist(l,e),appendChecklist(l,t),appendOptions(e,l),repeatLoopShowChecklist(e,l),l.querySelector(".btnSeeMoreCheck").setAttribute("id",e.id)})}function renameChecklist(e){e.subchecklist&&e.subchecklist.forEach((e,t)=>{7===e.id_type_checklist&&(e.name=`${e.name} - ${t+1}`)})}function appendOptions(e,t){e.options.length>0&&(t.querySelector(".btnOptions").style.display="block",t.querySelector(".btnOptions").setAttribute("id",e.id))}function appendChecklist(e,t){null===t?ONE_ELEMENT(".checklistContent").append(e):t.querySelector(".checklist__container").append(e)}function repeatLoopShowChecklist(e,t=null){e.subchecklist.length>0&&(t.querySelector(".btnSeeMore").style.display="block",showChecklist(e.subchecklist,t))}function eventFilesNames(){[...ALL_ELEMENTS(".checklistContent .checklist__download--btn")].forEach(e=>{e.addEventListener("click",e=>{let t=parseInt(e.currentTarget.getAttribute("id"));openModalFiles(filterChecklist(checklistArray.subchecklist,t,{}).file_name)})})}function openModalFiles(e){ONE_ELEMENT("#modalActions").querySelector(".modal-body").innerHTML="",ONE_ELEMENT("#modalActions").querySelector(".modal-title").innerHTML="Arquivos para download",ONE_ELEMENT("#btnAddModal").style.display="none",ONE_ELEMENT("#btnEditModal").style.display="none",e.forEach(e=>{let t=downloadChecklistItem.cloneNode(!0);t.style.display="flex",t.querySelector(".download__link").setAttribute("href",BASE_URL+"/storage/checklists_files/"+e),t.querySelector(".download__link").innerHTML=e,ONE_ELEMENT("#modalActions").querySelector(".modal-body").append(t)})}function eventsBtnSeeOption(){[...ALL_ELEMENTS(".checklistContent .btnOptions")].forEach(e=>{e.addEventListener("click",e=>{let t=parseInt(e.currentTarget.getAttribute("id"));openModalOptions(filterChecklist(checklistArray.subchecklist,t,{}).options)})})}function openModalOptions(e){ONE_ELEMENT("#modalActions").querySelector(".modal-body").innerHTML="",ONE_ELEMENT("#modalActions").querySelector(".modal-title").innerHTML="Opções da checklist",ONE_ELEMENT("#btnAddModal").style.display="none",ONE_ELEMENT("#btnEditModal").style.display="none",e.forEach(e=>{let t=optionsChecklist.cloneNode(!0);t.querySelector(".optionName").innerHTML=e.name,t.querySelector(".optionSelected").innerHTML=e.selected?"Sim":"Não",t.querySelector(".optionPointsObtained").innerHTML=e.pointsObtained,t.querySelector(".optionPoints").innerHTML=e.points,t.style.display="flex",ONE_ELEMENT("#modalActions").querySelector(".modal-body").append(t)})}function eventsBtnSeeMore(){[...ALL_ELEMENTS(".checklistContent .btnSeeMore")].forEach(e=>{e.addEventListener("click",e=>{showSubchecklistContainer(e.currentTarget.closest(".checklistExibition"))})})}function eventsBtnSeeMoreCheck(){[...ALL_ELEMENTS(".checklistContent .btnSeeMoreCheck")].forEach(e=>{e.addEventListener("click",e=>{let t=parseInt(e.currentTarget.getAttribute("id"));openModalChecklist(filterChecklist(checklistArray.subchecklist,t,{}))})})}function openModalChecklist(e){ONE_ELEMENT("#modalActions").querySelector(".modal-body").innerHTML="",ONE_ELEMENT("#modalActions").querySelector(".modal-title").innerHTML="Detalhes Checklist",ONE_ELEMENT("#btnAddModal").style.display="none",ONE_ELEMENT("#btnEditModal").style.display="none",formChecklist.querySelector(".nameChecklist").innerHTML=e.name,formChecklist.querySelector(".typeChecklist").innerHTML=typeChecklistArray[e.id_type_checklist],2===e.id_type_checklist?(formChecklist.querySelector(".valueChecklist").style.height="auto",e.file_name.length>0&&e.file_name.forEach(t=>{let l=formChecklist.querySelector(".valueChecklist").querySelector("a").cloneNode(!0);l.style.display="block",l.innerHTML="Download: "+e.name,l.setAttribute("href",BASE_URL+"/storage/checklists_files/"+t),formChecklist.querySelector(".valueChecklist").append(l)})):0!==e.id_type_checklist&&3!==e.id_type_checklist&&4!==e.id_type_checklist?(formChecklist.querySelector(".valueChecklist").style.display="flex",formChecklist.querySelector(".valueChecklist").innerHTML=e.value):formChecklist.querySelector(".valueChecklist").closest(".form-group").style.display="none",formChecklist.querySelector(".pointsChecklist").innerHTML="Pontos: "+e.points.toFixed(2),formChecklist.querySelector(".pointsObtainedChecklist").innerHTML="Pontos Obtidos: "+e.pointsObtained.toFixed(2),formChecklist.querySelector(".observationChecklist").innerHTML=""===e.observation?"Nenhuma observação":e.observation,formChecklist.style.display="block",ONE_ELEMENT("#modalActions").querySelector(".modal-body").append(formChecklist)}function showSubchecklistContainer(e){let t=parseInt(e.getAttribute("idElement")),l=filterChecklist(checklistArray.subchecklist,t,{});if(e.classList.contains("active"))e.style.height="100px",e.classList.remove("active"),l.active=!1;else{let t=e.querySelectorAll(".checklistContent .checklistExibition").length,i=100+100*t+35*t;e.style.height=i+"px",e.classList.add("active"),l.active=!0}}function showSubchecklistContainerLoop(e){e.forEach(e=>{let t=ONE_ELEMENT("#check"+e.id);if(e.active){let l=t.querySelectorAll(".checklistContent .checklistExibition").length,i=100+100*l+35*l;t.style.height=i+"px",t.classList.add("active"),e.active=!0}else defaultChecklistElement.style.height="65px",defaultChecklistElement.classList.remove("active"),e.active=!1;e.subchecklist.length>0&&showSubchecklistContainerLoop(e.subchecklist)})}function increaseDefaultChecklistFather(e,t=65){let l=ONE_ELEMENT("#check"+e.id),i=l.offsetHeight;if(t>65&&(l.style.height=i+t+"px"),null!=e.idDefaultChecklist){let l=filterChecklist(checklistArray.subchecklist,e.idDefaultChecklist,{}),i=e.subchecklist.length;increaseDefaultChecklistFather(l,65+65*i+35*i+t)}}function filterChecklist(e,t,l){let i=l;return e.forEach(e=>{e.id===t?i=e:e.subchecklist!=[]&&(i=filterChecklist(e.subchecklist,t,i))}),i}showChecklist(checklistArray.subchecklist),eventsBtnSeeMore(),eventsBtnSeeOption(),eventsBtnSeeMoreCheck(),eventFilesNames();