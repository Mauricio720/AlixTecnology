var checklist=ONE_ELEMENT(".checklistExibition"),checklistCompare=ONE_ELEMENT(".checklistCompare"),checklistArray=JSON.parse(ONE_ELEMENT("#checklistArray1").value),checklistArray2=JSON.parse(ONE_ELEMENT("#checklistArray2").value),typeChecklistArray=["Agrupamento","Texto","Upload","Multiplas Escolhas","Dupla Escolha","Numerica","Data"],optionsChecklist=ONE_ELEMENT(".optionsChecklistExibition"),formChecklist=ONE_ELEMENT("#formChecklistExibition");function showChecklist(e,t=null){e.map(e=>{checklistCompareClone=checklistCompare.cloneNode(!0);let i=checklist.cloneNode(!0);i.style.display="flex",0!==e.id_type_checklist&&3!==e.id_type_checklist&&4!==e.id_type_checklist||i.querySelector(".checklist__slot--value").remove(),fillInputsAndAttributeChecklist(i,e,1),appendChecklist(i,t,checklistCompareClone),appendOptions(e,i),repeatLoopShowChecklist(e,i),i.querySelector(".btnSeeMoreCheck").setAttribute("id",e.id)})}function showChecklist2(e,t=null){e.map((e,i)=>{let c=checklist.cloneNode(!0);c.style.display="flex",0!==e.id_type_checklist&&3!==e.id_type_checklist&&4!==e.id_type_checklist||c.querySelector(".checklist__slot--value").remove(),fillInputsAndAttributeChecklist(c,e,2);let l=ALL_ELEMENTS(".checklistContentCompare .checklistCompare")[i];appendChecklist(c,t,l,!0),appendOptions(e,c),repeatLoopShowChecklist(e,c),c.querySelector(".btnSeeMoreCheck").setAttribute("id",e.id)})}function fillInputsAndAttributeChecklist(e,t,i){if(e.setAttribute("idElement",t.id),e.setAttribute("checklistNumber",i),e.setAttribute("id","check"+t.id),e.querySelector(".checklist__title").innerHTML=t.name,e.querySelector(".checklist__date").innerHTML=t.created_at,2===t.id_type_checklist){let i=e.querySelector(".valueChecklist").querySelector("a");i.style.display="block",i.innerHTML="Download: "+t.name,i.setAttribute("href",BASE_URL+"/storage/checklists_files/"+t.file_name)}else 0!==t.id_type_checklist&&3!==t.id_type_checklist&&4!==t.id_type_checklist&&(e.querySelector(".valueChecklist").innerHTML=t.value);e.querySelector(".typeChecklist").innerHTML="Tipo: "+typeChecklistArray[t.id_type_checklist],e.querySelector(".points").innerHTML="Pontos Possiveis: "+t.points,e.querySelector(".pointsObtained").innerHTML="Pontos Obtidos: "+t.pointsObtained,e.querySelector(".observation").innerHTML=""===t.observation?"Nenhuma observação":t.observation}function appendOptions(e,t){e.options.length>0&&(t.querySelector(".btnOptions").style.display="block",t.querySelector(".btnOptions").setAttribute("id",e.id))}function appendChecklist(e,t,i,c=!1){null===t?(i.append(e),!1===c&&ONE_ELEMENT(".checklistContentCompare").append(i)):t.querySelector(".checklist__container").append(e)}function repeatLoopShowChecklist(e,t=null){e.subchecklist.length>0&&(t.querySelector(".btnSeeMore").style.display="block",showChecklist(e.subchecklist,t))}function eventsBtnSeeOption(){[...ALL_ELEMENTS(".checklistContentCompare .btnOptions")].forEach(e=>{e.addEventListener("click",e=>{let t=parseInt(e.currentTarget.getAttribute("id")),i=[];i=1===parseInt(e.currentTarget.closest(".checklistExibition").getAttribute("checklistNumber"))?checklistArray.subchecklist:checklistArray2.subchecklist,openModal(filterChecklist(i,t,{}).options)})})}function openModal(e){ONE_ELEMENT("#modalActions").querySelector(".modal-body").innerHTML="",ONE_ELEMENT("#modalActions").querySelector(".modal-title").innerHTML="Opções da checklist",ONE_ELEMENT("#btnAddModal").style.display="none",ONE_ELEMENT("#btnEditModal").style.display="none",e.forEach(e=>{let t=optionsChecklist.cloneNode(!0);t.querySelector(".optionName").innerHTML=e.name,t.querySelector(".optionSelected").innerHTML=e.selected?"Sim":"Não",t.querySelector(".optionPointsObtained").innerHTML=e.pointsObtained,t.querySelector(".optionPoints").innerHTML=e.points,t.style.display="flex",ONE_ELEMENT("#modalActions").querySelector(".modal-body").append(t)})}function eventsBtnSeeMore(){[...ALL_ELEMENTS(".checklistContentCompare .btnSeeMore")].forEach(e=>{e.addEventListener("click",e=>{showSubchecklistContainer(e.currentTarget.closest(".checklistExibition"))})})}function eventsBtnSeeMoreCheck(){[...ALL_ELEMENTS(".checklistContentCompare .btnSeeMoreCheck")].forEach(e=>{e.addEventListener("click",e=>{let t=parseInt(e.currentTarget.getAttribute("id")),i=[];i=1===parseInt(e.currentTarget.closest(".checklistExibition").getAttribute("checklistNumber"))?checklistArray.subchecklist:checklistArray2.subchecklist,openModalChecklist(filterChecklist(i,t,{}))})})}function openModalChecklist(e){if(ONE_ELEMENT("#modalActions").querySelector(".modal-body").innerHTML="",ONE_ELEMENT("#modalActions").querySelector(".modal-title").innerHTML="Detalhes Checklist",ONE_ELEMENT("#btnAddModal").style.display="none",ONE_ELEMENT("#btnEditModal").style.display="none",formChecklist.querySelector(".nameChecklist").innerHTML=e.name,formChecklist.querySelector(".typeChecklist").innerHTML=typeChecklistArray[e.id_type_checklist],2===e.id_type_checklist){let t=formChecklist.querySelector(".valueChecklist").querySelector("a");t.style.display="block",t.innerHTML="Download: "+e.name,t.setAttribute("href",BASE_URL+"/storage/checklists_files/"+e.file_name)}else 0!==e.id_type_checklist&&3!==e.id_type_checklist&&4!==e.id_type_checklist?formChecklist.querySelector(".valueChecklist").innerHTML=e.value:formChecklist.querySelector(".valueChecklist").closest(".form-group").style.display="none";formChecklist.querySelector(".pointsChecklist").innerHTML="Pontos: "+e.points,formChecklist.querySelector(".pointsObtainedChecklist").innerHTML=e.pointsObtained,formChecklist.querySelector(".observationChecklist").innerHTML=""===e.observation?"Nenhuma observação":e.observation,formChecklist.style.display="block",ONE_ELEMENT("#modalActions").querySelector(".modal-body").append(formChecklist)}function showSubchecklistContainer(e){let t=parseInt(e.getAttribute("idElement")),i=parseInt(e.getAttribute("checklistNumber"));console.log(i);let c=[];c=1===i?checklistArray.subchecklist:checklistArray2.subchecklist;let l=filterChecklist(c,t,{});if(e.classList.contains("active"))e.style.height="65px",e.classList.remove("active"),l.active=!1;else{let t=e.querySelectorAll(".checklistContent .defaultChecklistExibition").length,i=65+65*t+35*t;e.style.height=i+"px",e.classList.add("active"),l.active=!0}}function showSubchecklistContainerLoop(e){e.forEach(e=>{let t=ONE_ELEMENT("#check"+e.id);if(e.active){let i=e.subchecklist.length,c=65+65*i+35*i;t.style.height=c+"px",t.classList.add("active"),t.active=!0,e.subchecklist>0&&increaseDefaultChecklistFather(e)}else t.style.height="65px",t.classList.remove("active"),t.active=!1;e.subchecklist.length>0&&showSubchecklistContainerLoop(e.subchecklist)})}function increaseDefaultChecklistFather(e,t=65){let i=ONE_ELEMENT("#check"+e.id),c=i.offsetHeight;if(t>65&&(i.style.height=c+t+"px"),null!=e.idDefaultChecklist){let i=filterChecklist(checklistArray.subchecklist,e.idDefaultChecklist,{}),c=e.subchecklist.length;increaseDefaultChecklistFather(i,65+65*c+35*c+t)}}function filterChecklist(e,t,i){let c=i;return e.forEach(e=>{e.id===t?c=e:e.subchecklist!=[]&&(c=filterChecklist(e.subchecklist,t,c))}),c}showChecklist(checklistArray.subchecklist),showChecklist2(checklistArray2.subchecklist),eventsBtnSeeMore(),eventsBtnSeeOption(),eventsBtnSeeMoreCheck();