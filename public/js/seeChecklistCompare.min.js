var checklist=ONE_ELEMENT(".checklistExibition"),checklistCompare=ONE_ELEMENT(".checklistCompare"),checklistArray=JSON.parse(ONE_ELEMENT("#checklistArray1").value),checklistArray2=JSON.parse(ONE_ELEMENT("#checklistArray2").value),typeChecklistArray=["Agrupamento","Texto","Upload","Multiplas Escolhas","Dupla Escolha","Numerica","Data","Agrupamento (dupla escolha)"],optionsChecklist=ONE_ELEMENT(".optionsChecklistExibition"),downloadChecklistItem=ONE_ELEMENT(".download__item"),formChecklist=ONE_ELEMENT("#formChecklistExibition");function showChecklist(e,t=null){e.map(e=>{checklistCompareClone=checklistCompare.cloneNode(!0);let i=checklist.cloneNode(!0);i.style.display="flex",0!==e.id_type_checklist&&3!==e.id_type_checklist&&4!==e.id_type_checklist||i.querySelector(".checklist__slot--value").remove(),7===e.id_type_checklist&&renameChecklist(e),fillInputsAndAttributeChecklist(i,e,1),appendChecklist(i,t,checklistCompareClone),appendOptions(e,i),repeatLoopShowChecklist(e,i),i.querySelector(".btnSeeMoreCheck").setAttribute("id",e.id),i.classList.add("checklistCompareOne")})}function showChecklist2(e,t=null){e.map((e,i)=>{let l=checklist.cloneNode(!0);l.style.display="flex",0!==e.id_type_checklist&&3!==e.id_type_checklist&&4!==e.id_type_checklist||l.querySelector(".checklist__slot--value").remove(),7===e.id_type_checklist&&renameChecklist(e),fillInputsAndAttributeChecklist(l,e,2);let c=ALL_ELEMENTS(".checklistContentCompare .checklistCompare")[i];appendChecklist(l,t,c,!0),appendOptions(e,l),repeatLoopShowChecklist(e,l),l.querySelector(".btnSeeMoreCheck").setAttribute("id",e.id)})}function renameChecklist(e){e.subchecklist.length>0&&e.subchecklist.forEach((e,t)=>{7===e.id_type_checklist&&(e.name=`${e.name} - ${t+1}`)})}function fillInputsAndAttributeChecklist(e,t,i){if(e.setAttribute("idElement",t.id),e.setAttribute("checklistNumber",i),e.setAttribute("id","check"+t.id),e.querySelector(".checklist__title").innerHTML=t.name,e.querySelector(".checklist__date").innerHTML=t.created_at,2===t.id_type_checklist){let i=e.querySelector(".checklist__download--btn");i.style.display="block",i.setAttribute("id",t.id),e.querySelector(".valueChecklist").style.display="none"}else 0!==t.id_type_checklist&&3!==t.id_type_checklist&&4!==t.id_type_checklist&&7!==t.id_type_checklist?e.querySelector(".valueChecklist").innerHTML=t.value:0!==t.id_type_checklist&&7!==t.id_type_checklist||(e.querySelector(".checklist__slot--value").style.display="none");e.querySelector(".typeChecklist").innerHTML="Tipo: "+typeChecklistArray[t.id_type_checklist],e.querySelector(".points").innerHTML="Pontos Possiveis: "+t.points,e.querySelector(".pointsObtained").innerHTML="Pontos Obtidos: "+t.pointsObtained,e.querySelector(".observation").innerHTML=""===t.observation?"Nenhuma observação":t.observation}function appendOptions(e,t){e.options.length>0&&(t.querySelector(".btnOptions").style.display="block",t.querySelector(".btnOptions").setAttribute("id",e.id))}function appendChecklist(e,t,i,l=!1){null===t?(i.append(e),!1===l&&ONE_ELEMENT(".checklistContentCompare").append(i)):t.querySelector(".checklist__container").append(e),e.style.height="100px"}function repeatLoopShowChecklist(e,t=null){e.subchecklist.length>0&&(t.querySelector(".btnSeeMore").style.display="block",showChecklist(e.subchecklist,t))}function eventsBtnSeeOption(){[...ALL_ELEMENTS(".checklistContentCompare .btnOptions")].forEach(e=>{e.addEventListener("click",e=>{let t=parseInt(e.currentTarget.getAttribute("id")),i=[];i=1===parseInt(e.currentTarget.closest(".checklistExibition").getAttribute("checklistNumber"))?checklistArray.subchecklist:checklistArray2.subchecklist,openModal(filterChecklist(i,t,{}).options)})})}function eventFilesNames(){[...ALL_ELEMENTS(".checklistContentCompare  .checklist__download--btn")].forEach(e=>{e.addEventListener("click",e=>{let t=parseInt(e.currentTarget.getAttribute("id"));openModalFiles(filterChecklist(checklistArray.subchecklist,t,{}).file_name)})})}function openModalFiles(e){ONE_ELEMENT("#modalActions").querySelector(".modal-body").innerHTML="",ONE_ELEMENT("#modalActions").querySelector(".modal-title").innerHTML="Arquivos para download",ONE_ELEMENT("#btnAddModal").style.display="none",ONE_ELEMENT("#btnEditModal").style.display="none",e.forEach(e=>{let t=downloadChecklistItem.cloneNode(!0);t.style.display="flex",t.querySelector(".download__link").setAttribute("href",BASE_URL+"/storage/checklists_files/"+e),t.querySelector(".download__link").innerHTML=e,ONE_ELEMENT("#modalActions").querySelector(".modal-body").append(t)})}function openModal(e){ONE_ELEMENT("#modalActions").querySelector(".modal-body").innerHTML="",ONE_ELEMENT("#modalActions").querySelector(".modal-title").innerHTML="Opções da checklist",ONE_ELEMENT("#btnAddModal").style.display="none",ONE_ELEMENT("#btnEditModal").style.display="none",e.forEach(e=>{let t=optionsChecklist.cloneNode(!0);t.querySelector(".optionName").innerHTML=e.name,t.querySelector(".optionSelected").innerHTML=e.selected?"Sim":"Não",t.querySelector(".optionPointsObtained").innerHTML=e.pointsObtained,t.querySelector(".optionPoints").innerHTML=e.points,t.style.display="flex",ONE_ELEMENT("#modalActions").querySelector(".modal-body").append(t)})}function eventsBtnSeeMore(){[...ALL_ELEMENTS(".checklistContentCompare .btnSeeMore")].forEach(e=>{e.addEventListener("click",e=>{showSubchecklistContainerCompare(e.currentTarget.closest(".checklistExibition"))})})}function eventsBtnSeeMoreCheck(){[...ALL_ELEMENTS(".checklistContentCompare .btnSeeMoreCheck")].forEach(e=>{e.addEventListener("click",e=>{let t=parseInt(e.currentTarget.getAttribute("id")),i=[];i=1===parseInt(e.currentTarget.closest(".checklistExibition").getAttribute("checklistNumber"))?checklistArray.subchecklist:checklistArray2.subchecklist,openModalChecklist(filterChecklist(i,t,{}))})})}function openModalChecklist(e){if(ONE_ELEMENT("#modalActions").querySelector(".modal-body").innerHTML="",ONE_ELEMENT("#modalActions").querySelector(".modal-title").innerHTML="Detalhes Checklist",ONE_ELEMENT("#btnAddModal").style.display="none",ONE_ELEMENT("#btnEditModal").style.display="none",formChecklist.querySelector(".nameChecklist").innerHTML=e.name,formChecklist.querySelector(".typeChecklist").innerHTML=typeChecklistArray[e.id_type_checklist],2===e.id_type_checklist){let t=formChecklist.querySelector(".valueChecklist").querySelector("a");t.style.display="block",t.innerHTML="Download: "+e.name,t.setAttribute("href",BASE_URL+"/storage/checklists_files/"+e.file_name)}else 0!==e.id_type_checklist&&3!==e.id_type_checklist&&4!==e.id_type_checklist?formChecklist.querySelector(".valueChecklist").innerHTML=e.value:formChecklist.querySelector(".valueChecklist").closest(".form-group").style.display="none";formChecklist.querySelector(".pointsChecklist").innerHTML="Pontos: "+e.points,formChecklist.querySelector(".pointsObtainedChecklist").innerHTML=e.pointsObtained,formChecklist.querySelector(".observationChecklist").innerHTML=""===e.observation?"Nenhuma observação":e.observation,formChecklist.style.display="block",ONE_ELEMENT("#modalActions").querySelector(".modal-body").append(formChecklist)}function showSubchecklistContainerCompare(e){let t=parseInt(e.getAttribute("idElement")),i=[];i=1===parseInt(e.getAttribute("checklistNumber"))?checklistArray.subchecklist:checklistArray2.subchecklist;let l=filterChecklist(i,t,{});if(e.classList.contains("active"))e.style.height="100px",e.classList.remove("active"),l.active=!1;else{let t=e.querySelectorAll(".checklist__container .checklistExibition").length,i=100+100*t+35*t;e.style.height=i+"px",e.classList.add("active"),l.active=!0}}function showSubchecklistContainerLoopCompare(e){e.forEach(e=>{let t=ONE_ELEMENT("#check"+e.id);if(e.active){let i=t.querySelectorAll(".checklistContent .checklistExibition").length,l=100+100*i+35*i;t.style.height=l+"px",t.classList.add("active"),e.active=!0}else defaultChecklistElement.style.height="65px",defaultChecklistElement.classList.remove("active"),e.active=!1;e.subchecklist.length>0&&showSubchecklistContainerLoopCompare(e.subchecklist)})}function increaseDefaultChecklistFatherCompare(e,t=65){let i=ONE_ELEMENT("#check"+e.id),l=i.offsetHeight;if(t>65&&(i.style.height=l+t+"px"),null!=e.idDefaultChecklist){let i=filterChecklist(checklistArray.subchecklist,e.idDefaultChecklist,{}),l=e.subchecklist.length;increaseDefaultChecklistFatherCompare(i,65+65*l+35*l+t)}}function filterChecklist(e,t,i){let l=i;return e.forEach(e=>{e.id===t?l=e:e.subchecklist!=[]&&(l=filterChecklist(e.subchecklist,t,l))}),l}showChecklist(checklistArray.subchecklist),showChecklist2(checklistArray2.subchecklist),eventsBtnSeeMore(),eventsBtnSeeOption(),eventsBtnSeeMoreCheck(),eventFilesNames();