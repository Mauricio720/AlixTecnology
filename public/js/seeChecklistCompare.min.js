var checklist=ONE_ELEMENT(".checklistExibition"),checklistCompare=ONE_ELEMENT(".checklistCompare"),checklistArray=JSON.parse(ONE_ELEMENT("#checklistArray1").value),checklistArray2=JSON.parse(ONE_ELEMENT("#checklistArray2").value),typeChecklistArray=["Agrupamento","Texto","Upload","Multiplas Escolhas","Dupla Escolha","Numerica","Data","Agrupamento (dupla escolha)",""],optionsChecklist=ONE_ELEMENT(".optionsChecklistExibition"),downloadChecklistItem=ONE_ELEMENT(".download__item"),formChecklist=ONE_ELEMENT("#formChecklistExibition"),carrousel=ONE_ELEMENT("#carousel");function showChecklist(e,t=null){e.map(e=>{checklistCompareClone=checklistCompare.cloneNode(!0);let i=checklist.cloneNode(!0);i.style.display="flex",0!==e.id_type_checklist&&3!==e.id_type_checklist&&4!==e.id_type_checklist||i.querySelector(".checklist__slot--value").remove(),7===e.id_type_checklist&&renameChecklist(e),fillInputsAndAttributeChecklist(i,e,1),appendChecklist(i,t,checklistCompareClone,!1,e),appendOptions(e,i),repeatLoopShowChecklist(e,i,1),i.querySelector(".btnSeeMoreCheck").setAttribute("id",e.id),i.querySelector(".btnSeeMoreCheck").setAttribute("checklistNumber",1),i.classList.add("checklistCompareOne")})}function showChecklist2(e,t=null){e.map((e,i)=>{let l=checklist.cloneNode(!0);l.style.display="flex",0!==e.id_type_checklist&&3!==e.id_type_checklist&&4!==e.id_type_checklist||l.querySelector(".checklist__slot--value").remove(),7===e.id_type_checklist&&renameChecklist(e),fillInputsAndAttributeChecklist(l,e,2);let c=ALL_ELEMENTS(".checklistContentCompare .checklistCompare")[i];appendChecklist(l,t,c,!0,e),appendOptions(e,l),repeatLoopShowChecklist(e,l,2),l.querySelector(".btnSeeMoreCheck").setAttribute("id",e.id),l.querySelector(".btnSeeMoreCheck").setAttribute("checklistNumber",2)})}function renameChecklist(e){e.subchecklist.length>0&&e.subchecklist.forEach((e,t)=>{7===e.id_type_checklist&&(e.name=`${e.name} - ${t+1}`)})}function fillInputsAndAttributeChecklist(e,t,i){if(e.setAttribute("idElement",t.id),e.setAttribute("checklistNumber",i),e.setAttribute("id","check"+t.id),e.querySelector(".checklist__title").innerHTML=t.name,e.querySelector(".checklist__date").innerHTML=t.created_at,2===t.id_type_checklist)t.file_name.length>0?fillPicturesAndDocumentsModal(e,t.file_name):(e.querySelector(".valueChecklist").classList.remove("d-none"),e.querySelector(".valueChecklist").innerHTML="Nenhum arquivo inserido");else if(0!==t.id_type_checklist&&3!==t.id_type_checklist&&4!==t.id_type_checklist&&7!==t.id_type_checklist)e.querySelector(".valueChecklist").innerHTML=t.value;else if(""===t.value){let t=e.querySelector(".checklist__slot--value");null!==t&&(t.style.display="none")}e.querySelector(".points").innerHTML="Pontos Possiveis: "+t.points.toFixed(2),e.querySelector(".pointsObtained").innerHTML="Pontos Obtidos: "+t.pointsObtained.toFixed(2),e.querySelector(".observation").innerHTML=""===t.observation?"Nenhuma observação":t.observation}function fillPicturesAndDocumentsModal(e,t){let i=e.querySelector(".picturesCarrousel");i.style.display="flex";let l=i.querySelectorAll(".picture")[0].cloneNode(!0);i.innerHTML="",t.forEach((e,t)=>{let c=l.cloneNode(!0),s=c.querySelector("img");verifyImgs(e)?(c.setAttribute("href",`${BASE_URL}/storage/checklists_files/${e}`),s.setAttribute("src",`${BASE_URL}/storage/checklists_files/${e}`)):(s.setAttribute("src",BASE_URL+"/storage/general_icons/file.png"),c.setAttribute("href",`${BASE_URL}/storage/general_icons/${e}`)),c.setAttribute("key",t),i.append(c)}),eventPictureShowModal(i,t)}function eventPictureShowModal(e,t){[...e.querySelectorAll(".picture")].forEach(e=>{e.addEventListener("click",e=>{let i=parseInt(e.currentTarget.getAttribute("key"));openModalFiles(t,i)})})}function openModalFiles(e,t){ONE_ELEMENT("#modalActions").querySelector(".modal-body").innerHTML="",ONE_ELEMENT("#modalActions").querySelector(".modal-title").innerHTML="Clique para baixar",ONE_ELEMENT("#btnAddModal").style.display="none",ONE_ELEMENT("#btnEditModal").style.display="none",ONE_ELEMENT("#modalActions .modal-body").append(carrousel);let i=carrousel.querySelector(".carousel-item").cloneNode(!0),l=carrousel.querySelector(".carousel-inner");l.innerHTML="",e.forEach((e,c)=>{let s=i.cloneNode(!0);verifyImgs(e)?(s.querySelector("img").setAttribute("src",`${BASE_URL}/storage/checklists_files/${e}`),s.setAttribute("href",`${BASE_URL}/storage/checklists_files/${e}`)):(s.querySelector("img").setAttribute("src",BASE_URL+"/storage/general_icons/file.png"),s.setAttribute("href",`${BASE_URL}/storage/checklists_files/${e}`)),l.append(s),c===t?s.classList.add("active"):s.classList.remove("active")}),carrousel.classList.remove("d-none")}function verifyImgs(e){let t=e.split(".")[1];return void 0!==["jpg","jpeg","png","gif","svg"].find(e=>e===t)}function appendOptions(e,t){e.options.length>0&&e.options.forEach(e=>{let i=optionsChecklist.cloneNode(!0);i.querySelector(".optionName").innerHTML=e.name,i.querySelector(".optionSelected").innerHTML=e.selected?"Sim":"Não",i.querySelector(".optionPointsObtained").innerHTML=e.pointsObtained.toFixed(2),i.querySelector(".optionPoints").innerHTML=e.points.toFixed(2),i.style.display="flex",t.style.height="auto",t.querySelector(".checklist__container").append(i)})}function appendChecklist(e,t,i,l=!1,c){null===t?(i.append(e),!1===l&&ONE_ELEMENT(".checklistContentCompare").append(i)):t.querySelector(".checklist__container").append(e),c.file_name.length>0?e.style.height="auto":e.style.height="100px"}function repeatLoopShowChecklist(e,t=null,i){e.subchecklist.length>0&&(t.querySelector(".btnSeeMore").style.display="block",1===i?showChecklist(e.subchecklist,t):showChecklist2(e.subchecklist,t))}function eventBtnPrint(){ONE_ELEMENT("#btnPrint").addEventListener("click",()=>{ONE_ELEMENT("#card_base").style.display="none",[...ALL_ELEMENTS(".checklistContentCompare .checklistExibition .btnSeeMore")].forEach(e=>{if("block"===e.style.display){let t=e.closest(".checklistExibition");t.classList.contains("active")||showSubchecklistContainerCompare(t)}}),window.print(),ONE_ELEMENT("#card_base").style.display="block"})}function eventFilesNames(){[...ALL_ELEMENTS(".checklistContentCompare .checklist__download--btn")].forEach(e=>{e.addEventListener("click",e=>{let t=parseInt(e.currentTarget.getAttribute("id")),i=filterChecklist(checklistArray.subchecklist,t,{});openModalFiles(i.file_name)})})}function eventPictureShowModal(e,t){[...e.querySelectorAll(".picture")].forEach(e=>{e.addEventListener("click",e=>{let i=parseInt(e.currentTarget.getAttribute("key"));openModalFiles(t,i)})})}function openModalFiles(e,t){ONE_ELEMENT("#modalActions").querySelector(".modal-body").innerHTML="",ONE_ELEMENT("#modalActions").querySelector(".modal-title").innerHTML="Clique para baixar",ONE_ELEMENT("#btnAddModal").style.display="none",ONE_ELEMENT("#btnEditModal").style.display="none",ONE_ELEMENT("#modalActions .modal-body").append(carrousel);let i=carrousel.querySelector(".carousel-item").cloneNode(!0),l=carrousel.querySelector(".carousel-inner");l.innerHTML="",e.forEach((e,c)=>{let s=i.cloneNode(!0);verifyImgs(e)?(s.querySelector("img").setAttribute("src",`${BASE_URL}/storage/checklists_files/${e}`),s.setAttribute("href",`${BASE_URL}/storage/checklists_files/${e}`)):(s.querySelector("img").setAttribute("src",BASE_URL+"/storage/general_icons/file.png"),s.setAttribute("href",`${BASE_URL}/storage/checklists_files/${e}`)),l.append(s),c===t?s.classList.add("active"):s.classList.remove("active")}),carrousel.classList.remove("d-none")}function openModal(e){ONE_ELEMENT("#modalActions").querySelector(".modal-body").innerHTML="",ONE_ELEMENT("#modalActions").querySelector(".modal-title").innerHTML="Opções da checklist",ONE_ELEMENT("#btnAddModal").style.display="none",ONE_ELEMENT("#btnEditModal").style.display="none",e.forEach(e=>{let t=optionsChecklist.cloneNode(!0);t.querySelector(".optionName").innerHTML=e.name,t.querySelector(".optionSelected").innerHTML=e.selected?"Sim":"Não",t.querySelector(".optionPointsObtained").innerHTML=e.pointsObtained,t.querySelector(".optionPoints").innerHTML=e.points,t.style.display="flex",ONE_ELEMENT("#modalActions").querySelector(".modal-body").append(t)})}function eventsBtnSeeMore(){[...ALL_ELEMENTS(".checklistContentCompare .btnSeeMore")].forEach(e=>{e.addEventListener("click",e=>{showSubchecklistContainerCompare(e.currentTarget.closest(".checklistExibition"))})})}function eventsBtnSeeMoreCheck(){[...ALL_ELEMENTS(".checklistContentCompare .btnSeeMoreCheck")].forEach(e=>{e.addEventListener("click",e=>{let t=parseInt(e.currentTarget.getAttribute("id")),i=[];i=1===parseInt(e.currentTarget.getAttribute("checklistNumber"))?checklistArray.subchecklist:checklistArray2.subchecklist,openModalChecklist(filterChecklist(i,t,{}))})})}function openModalChecklist(e){if(ONE_ELEMENT("#modalActions").querySelector(".modal-body").innerHTML="",ONE_ELEMENT("#modalActions").querySelector(".modal-title").innerHTML="Detalhes Checklist",ONE_ELEMENT("#btnAddModal").style.display="none",ONE_ELEMENT("#btnEditModal").style.display="none",formChecklist.querySelector(".nameChecklist").innerHTML=e.name,formChecklist.querySelector(".typeChecklist").innerHTML=typeChecklistArray[e.id_type_checklist],2===e.id_type_checklist){if(formChecklist.querySelector(".valueChecklist").style.display="none",e.file_name.length>0){let t=formChecklist.querySelector(".picturesCarrousel");t.style.display="flex";let i=t.querySelectorAll(".picture")[0].cloneNode(!0);t.innerHTML="",t.style.maxWidth="initial",e.file_name.forEach((l,c)=>{let s=i.cloneNode(!0),o=s.querySelector("img");verifyImgs(l)?(s.setAttribute("href",`${BASE_URL}/storage/checklists_files/${l}`),o.setAttribute("src",`${BASE_URL}/storage/checklists_files/${l}`)):(o.setAttribute("src",BASE_URL+"/storage/general_icons/file.png"),s.setAttribute("href",`${BASE_URL}/storage/general_icons/${l}`)),s.setAttribute("key",c),t.append(s),eventPictureShowModal(t,e.file_name)})}}else 0!==e.id_type_checklist&&3!==e.id_type_checklist&&4!==e.id_type_checklist?(formChecklist.querySelector(".valueChecklist").style.display="flex",formChecklist.querySelector(".valueChecklist").innerHTML=e.value):formChecklist.querySelector(".valueChecklist").closest(".form-group").style.display="none";console.log(e),formChecklist.querySelector(".pointsChecklist").innerHTML="Pontos: "+e.points,formChecklist.querySelector(".pointsObtainedChecklist").innerHTML="Pontos Obtidos: "+e.pointsObtained,formChecklist.querySelector(".observationChecklist").innerHTML=""===e.observation?"Nenhuma observação":e.observation,formChecklist.style.display="block",ONE_ELEMENT("#modalActions").querySelector(".modal-body").append(formChecklist)}function showSubchecklistContainerCompare(e){let t=parseInt(e.getAttribute("idElement")),i=[];i=1===parseInt(e.getAttribute("checklistNumber"))?checklistArray.subchecklist:checklistArray2.subchecklist;let l=filterChecklist(i,t,{});if(e.classList.contains("active"))e.style.height="100px",e.classList.remove("active"),l.active=!1;else{let t=35*e.querySelectorAll(".checklist__container .checklistExibition").length,i=100+getTotalHeight(e)+t;e.style.height=i+"px",e.classList.add("active"),l.active=!0}}function getTotalHeight(e){let t=0;return e.querySelectorAll(".checklist__container .checklistExibition").forEach(e=>{let i=e.offsetHeight;t+=i}),t}function showSubchecklistContainerLoopCompare(e){e.forEach(e=>{let t=ONE_ELEMENT("#check"+e.id);if(e.active){let i=t.querySelectorAll(".checklistContent .checklistExibition").length,l=100+100*i+35*i;t.style.height=l+"px",t.classList.add("active"),e.active=!0}else defaultChecklistElement.style.height="65px",defaultChecklistElement.classList.remove("active"),e.active=!1;e.subchecklist.length>0&&showSubchecklistContainerLoopCompare(e.subchecklist)})}function increaseDefaultChecklistFatherCompare(e,t=65){let i=ONE_ELEMENT("#check"+e.id),l=i.offsetHeight;if(t>65&&(i.style.height=l+t+"px"),null!=e.idDefaultChecklist){let i=filterChecklist(checklistArray.subchecklist,e.idDefaultChecklist,{}),l=e.subchecklist.length;increaseDefaultChecklistFatherCompare(i,65+65*l+35*l+t)}}function filterChecklist(e,t,i){let l=i;return e.forEach(e=>{e.id===t?l=e:e.subchecklist!=[]&&(l=filterChecklist(e.subchecklist,t,l))}),l}showChecklist(checklistArray.subchecklist),showChecklist2(checklistArray2.subchecklist),eventsBtnSeeMore(),eventsBtnSeeOption(),eventsBtnSeeMoreCheck(),eventFilesNames(),eventBtnPrint();