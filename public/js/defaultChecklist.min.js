var defaultChecklist=ONE_ELEMENT(".defaultChecklist");let defaultChecklistJson=ONE_ELEMENT("#default_checklist_json").value;var defaultChecklistArray=""!==defaultChecklistJson?JSON.parse(ONE_ELEMENT("#default_checklist_json").value):[],idIncrement=1,idIndentOption=1,optionsDefaultChecklist=ONE_ELEMENT(".optionsDefaultChecklist"),checklistSave=!1,typechecklistModal="";function verifyInProgressDefaultChecklist(){""!=defaultChecklistJson&&(idIncrement=parseInt(ONE_ELEMENT("#lastIdIncrement").value),idIndentOption=parseInt(ONE_ELEMENT("#lastIdIncrementOption").value),checklistSave=!0,ONE_ELEMENT(".checklistContent").innerHTML="",showDefaultChecklist(defaultChecklistArray),allEventsInAddChecklist(!0),eventsBtnDelete(),verifyBtnSave(),showSubchecklistContainerLoop(defaultChecklistArray))}function verifyBtnSave(){defaultChecklistArray.length>0?(ONE_ELEMENT("#btnSave").classList.remove("d-none"),ONE_ELEMENT("#btnFinish").classList.remove("d-none")):(ONE_ELEMENT("#btnSave").classList.add("d-none"),ONE_ELEMENT("#btnFinish").classList.add("d-none"))}function showDefaultChecklist(e){e.map(e=>{let t=defaultChecklist.cloneNode(!0);t.style.display="flex",fillInputsAndAttributeDefaultChecklist(t,e),verifyIdDefaultNullSelectDisabled(t,e),verifyCorrectPercentageInputDanger(t,e),verifyIdDefaultNullInputDanger(t,e),verifySubchecklists(t,e),verifySubchecklistsLengthBtnSeeMore(t,e),verifyTypeSubchecklist(t,e),verifyActiveDefaultChecklist(t,e),verifyDuplicateButton(t,e),verifyBtnScroll(),appendDefaultChecklist(t,e),!1===checklistSave&&setChecklistPoint(e.id),repeatLoopShowDefaultChecklist(e,checklistSave)})}function fillInputsAndAttributeDefaultChecklist(e,t){e.setAttribute("idElement",t.id),e.setAttribute("id","defaultCheck"+t.id),e.querySelectorAll("input")[0].value=t.name,e.querySelectorAll("input")[1].value=t.biggerSmaller,e.querySelectorAll("input")[2].value=parseFloat(t.percentage).toFixed(2),e.querySelectorAll("input")[3].value=parseFloat(t.points).toFixed(2),e.querySelectorAll("input")[4].value=t.observation}function verifyIdDefaultNullSelectDisabled(e,t){null===t.idDefaultChecklist?(e.querySelector("select").disabled=!0,e.querySelector("select").value=0,e.querySelector(".btnAddDefaultChecklist").style.display="block"):e.querySelector("select").value=t.typechecklist.toString()}function verifyIdDefaultNullInputDanger(e,t){null!==t.idDefaultChecklist&&(e.querySelectorAll("input")[2].disabled=!1,e.querySelectorAll("input")[3].disabled=!0)}function verifyCorrectPercentageInputDanger(e,t){t.correctPercentage?e.querySelectorAll("input")[3].classList.remove("input-danger"):e.querySelectorAll("input")[3].classList.add("input-danger")}function verifySubchecklists(e,t){0===t.subchecklists.length&&null===t.idDefaultChecklist||"0"===t.typechecklist||"7"===t.typechecklist?e.querySelectorAll("input")[3].disabled=!1:e.querySelectorAll("input")[3].disabled=!0}function verifySubchecklistsLengthBtnSeeMore(e,t){0===t.subchecklists.length?e.querySelector(".btnSeeMore").style.display="none":e.querySelector(".btnSeeMore").style.display="block"}function verifyTypeSubchecklist(e,t){"3"===t.typechecklist||"4"===t.typechecklist?(e.querySelector(".btnAddOptions").style.display="block",e.querySelector(".btnAddOptions").setAttribute("type",t.typechecklist)):e.querySelector(".btnAddOptions").style.display="none","0"!==t.typechecklist&&"7"!==t.typechecklist||(e.querySelector(".btnAddDefaultChecklist").style.display="block",""!=t.idDefaultChecklist&&e.querySelector(".btnDuplicate").classList.remove("d-none")),"8"===t.typechecklist&&(e.querySelectorAll(".defaultChecklist__slot")[1].style.display="flex")}function verifyActiveDefaultChecklist(e,t){t.active&&e.classList.add("active")}function verifyDuplicateButton(e,t){t.duplicate?e.querySelector(".btnDuplicate").style.backgroundColor="#00b800":e.querySelector(".btnDuplicate").style.backgroundColor="transparent"}function verifyBtnScroll(){defaultChecklistArray.length>0?ONE_ELEMENT(".actionsScroll").style.display="flex":ONE_ELEMENT(".actionsScroll").style.display="none"}function appendDefaultChecklist(e,t){if(null!=t.idDefaultChecklist){ONE_ELEMENT("#defaultCheck"+t.idDefaultChecklist).querySelector(".defaultChecklist__container").append(e)}else ONE_ELEMENT(".checklistContent").append(e)}function repeatLoopShowDefaultChecklist(e,t){e.subchecklists.length>0&&showDefaultChecklist(e.subchecklists,t)}function downScrollNewDefaultChecklist(){[...ALL_ELEMENTS(".checklistContent .btnAddDefaultChecklist")].forEach(e=>{if(parseInt(e.closest(".defaultChecklist").getAttribute("idElement"))===idIncrement){let t=e.closest(".defaultChecklist").getBoundingClientRect();window.scrollBy(t.x,t.y)}})}function newDefaultChecklistEffect(){[...ALL_ELEMENTS(".checklistContent .btnAddDefaultChecklist")].forEach(e=>{parseInt(e.closest(".defaultChecklist").getAttribute("idElement"))===idIncrement&&(e.closest(".defaultChecklist").style.backgroundColor="rgb(237 237 237)")})}function eventCloneDefaultChecklist(){ALL_ELEMENTS(".defaultCheckRadio").forEach(e=>{e.addEventListener("change",e=>{let t=e.currentTarget.previousElementSibling;defaultChecklistArray=JSON.parse(t.value),idIncrement=parseInt(t.getAttribute("lastidincrement")),idIndentOption=parseInt(t.getAttribute("lastidincrementoption")),checklistSave=!1,clearContent(),showDefaultChecklist(defaultChecklistArray),allEventsInAddChecklist(!0),eventsBtnDelete(),verifyBtnSave(),showSubchecklistContainerLoop(defaultChecklistArray)})})}function allEventsInAddChecklist(e=!1){[...ALL_ELEMENTS(".checklistContent .btnAddDefaultChecklist")].forEach(t=>{let n=getIdToDefaultChecklist(t),l=getMainElementHTMLDefaultChecklist(t),i=filterDefaultChecklist(defaultChecklistArray,n,{});eventAddChecklist(t,n,e),eventsBtnAddOptions(),eventsBtnSeeMore(),uniqueEventInputChecklistName(l,i),uniqueEventInputPointingPercentage(l,i),uniqueEventPointingNumber(l,i),null!==i.idDefaultChecklist&&uniqueEventInputPointingAgrouping(l,i),uniqueEventObservation(l,i),uniqueEventFocusInputDanger(l,i),uniqueEventTypeChecklist(l,i),uniqueEventBiggerSmaller(l,i)})}function eventAddChecklist(e,t,n=!1){let l=getMainElementHTMLDefaultChecklist(e),i=getElementByInProgress(n,l),o=filterDefaultChecklist(defaultChecklistArray,t,{});e.addEventListener("click",()=>{validationDefaultChecklist(i,o)&&(checklistSave=!1,clearContent(),addDefaultChecklist(t),setActiveDefaultChecklist(o),showDefaultChecklist(defaultChecklistArray),allEventsInAddChecklist(),eventsBtnSeeMore(),eventsBtnDelete(),eventsDuplicateChecklist(),verifyBtnSave(),eventsBtnAddOptions(),showSubchecklistContainerLoop(defaultChecklistArray),!1===n&&(downScrollNewDefaultChecklist(),newDefaultChecklistEffect()),typechecklistModal="")})}function getElementByInProgress(e,t){return e?t:t.closest(".defaultChecklist")}function getMainElementHTMLDefaultChecklist(e){return e.closest(".defaultChecklist")}function setActiveDefaultChecklist(e){e.active=!0}function uniqueEventInputChecklistName(e,t){e.querySelectorAll("input")[0].addEventListener("keyup",e=>{let n=e.currentTarget.value;t.name=n})}function uniqueEventInputPointingPercentage(e,t){e.querySelectorAll("input")[2].addEventListener("input",e=>{let n=parseFloat(e.currentTarget.value);idDefaultChecklistFather=calcPointing(n,t),0===n&&(setNewsPercentageWhenDelete(t),changeValuesDefaultChecklist(t)),verifyCorrectPercentage(idDefaultChecklistFather)})}function changeValuesDefaultChecklist(e,t=!1){let n=filterDefaultChecklist(defaultChecklistArray,e.idDefaultChecklist,{});n.subchecklists.forEach(e=>{let l=ONE_ELEMENT("#defaultCheck"+e.id),i=e.points>0?e.points.toFixed(2):0,o=0;0!==i&&0!==n.points&&(o=100*i/n.points,o=e.percentage>0?o.toFixed(2):0),l.querySelectorAll("input")[2].value=o,l.querySelectorAll("input")[3].value=i,calcPointAgrouping(e.points,e,t),e.options.length>0&&updatePointsOptions(e.options,e.points,e)})}function setNewsPercentageWhenDelete(e){let t=filterDefaultChecklist(defaultChecklistArray,e.idDefaultChecklist,{}),n=t.points/getNumberSubchecklist(e);t.subchecklists.forEach(e=>{e.percentage>0&&(e.points=n)})}function getNumberSubchecklist(e){let t=filterDefaultChecklist(defaultChecklistArray,e.idDefaultChecklist,{}),n=0;return t.subchecklists.forEach(e=>{e.percentage>0&&n++}),n}function uniqueEventInputPointingAgrouping(e,t){e.querySelectorAll("input")[3].addEventListener("input",e=>{let n=calcPointAgrouping(e.currentTarget.value,t,!0);idDefaultChecklistFather=calcPointing(n,t,!0),0===n&&(setNewsPercentageWhenDelete(t),changeValuesDefaultChecklist(t,!0)),verifyCorrectPercentage(idDefaultChecklistFather)})}function calcPointAgrouping(e,t,n=!1){let l=parseFloat(e),i=filterDefaultChecklist(defaultChecklistArray,t.idDefaultChecklist,{}).points,o=0;if(0!==l&&0!==i&&(o=100*l/i),n){ONE_ELEMENT("#defaultCheck"+t.id).querySelectorAll("input")[2].value=o.toFixed(2)}return o}function calcPointing(e,t,n=!1){let l=e;t.percentage=e;let i=filterDefaultChecklist(defaultChecklistArray,t.idDefaultChecklist,{}),o=i.points,s=0;if(0!==l&&0!==o&&(s=l/100*o),t.points=isNaN(s)?"":s,!1===n){ONE_ELEMENT("#defaultCheck"+t.id).querySelectorAll("input")[3].value=s.toFixed(2)}if(t.subchecklists.length>0){let n=getNumberSubchecklistInEvent(t),i=0;""===e&&(n=t.subchecklists.length),0!==l&&0!==n&&(i=s/n),t.subchecklists.forEach(t=>{isNaN(e)?clearInputsChecklist(t.id):updatedSubchecklistPoints(t.id,i,s)})}return i.id}function clearInputsChecklist(e){let t=filterDefaultChecklist(defaultChecklistArray,e,{}),n=ONE_ELEMENT("#defaultCheck"+t.id);t.points="",t.percentage="",n.querySelectorAll("input")[2].value="",n.querySelectorAll("input")[3].value="",t.subchecklists.forEach(e=>{clearInputsChecklist(e.id)})}function getNumberSubchecklistInEvent(e){let t=0;return e.subchecklists.forEach(e=>{(e.percentage>0||""===e.percentage)&&t++}),t}function getSubchecklistValues(e){let t=0;return e.subchecklists.forEach(e=>{e.percentage>0&&t++}),t}function updatedSubchecklistPoints(e,t,n){let l=filterDefaultChecklist(defaultChecklistArray,e,{}),i=ONE_ELEMENT("#defaultCheck"+l.id);isNaN(t)&&(t="");let o=0;if(0!==n&&0!==t&&(o=100*t/n),isNaN(o)&&(o=""),0!==l.points?(l.points=t,l.percentage=o,l.correctPercentage=!0):(l.correctPercentage=!0,l.points=0,l.percentage=0),i.querySelectorAll("input")[2].value=""!==l.percentage?l.percentage.toFixed(2):o,i.querySelectorAll("input")[3].value=""!==l.points?l.points.toFixed(2):t,verifyCorrectPercentage(e),l.subchecklists.length>0){let e=t/l.subchecklists.length;l.subchecklists.forEach(t=>{updatedSubchecklistPoints(t.id,e,n)})}}function uniqueEventPointingNumber(e,t){e.querySelectorAll("input")[3].addEventListener("input",n=>{let l=n.currentTarget.value;t.points=l,t.percentage=100,e.querySelectorAll("input")[2].value=100})}function uniqueEventObservation(e,t){e.querySelectorAll("input")[4].addEventListener("keyup",e=>{let n=e.currentTarget.value;t.observation=n})}function uniqueEventBiggerSmaller(e,t){e.querySelectorAll("input")[1].addEventListener("keyup",e=>{let n=e.currentTarget.value;t.biggerSmaller=n})}function uniqueEventFocusInputDanger(e){eventFocusInputsDangerValidation(0,e),eventFocusInputsDangerValidation(1,e),eventFocusInputsDangerValidation(2,e),eventFocusInputsDangerValidation(3,e),eventFocusInputsDangerValidation(4,e)}function eventFocusInputsDangerValidation(e,t){t.querySelectorAll("input")[e].addEventListener("focus",e=>{removeToInputsDangerValidation(e.currentTarget,t)})}function removeToInputsDangerValidation(e,t){e.classList.remove("input-danger"),t.classList.remove("input-danger"),ONE_ELEMENT(".alert-header").classList.add("d-none")}function uniqueEventTypeChecklist(e,t){null!==e.querySelector("select")&&e.querySelector("select").addEventListener("change",n=>{let l=n.currentTarget.value,i=n.currentTarget;setDisableInputInEventsSelected(l,e),setTypeChecklist(l,t),clearOptionsToDefaultChecklist(t),removeDangerValidationLayout(i),verifyTypeChecklist(l,i,t)})}function setTypeChecklist(e,t){t.typechecklist=e}function clearOptionsToDefaultChecklist(e){e.options=[]}function removeDangerValidationLayout(e){e.classList.remove("input-danger")}function verifyTypeChecklist(e,t,n){"0"===e||"7"===e?changeLayoutBtnsVisibleInEventsAddAndDuplicate(!0,t):(n.duplicate=!1,changeLayoutBtnsVisibleInEventsAddAndDuplicate(!1,t)),"3"===e||"4"===e?(changeLayoutBtnsVisibleInEventsAddOptions(!0,t),t.closest(".defaultChecklist").querySelector(".btnAddOptions").setAttribute("type",e)):changeLayoutBtnsVisibleInEventsAddOptions(!1,t),t.closest(".defaultChecklist").querySelectorAll(".defaultChecklist__slot")[1].style.display="8"===e||"9"===e?"flex":"none"}function setDisableInputInEventsSelected(e,t){t.querySelectorAll("input")[3].disabled="0"!==e&&"7"!==e}function changeLayoutBtnsVisibleInEventsAddAndDuplicate(e,t){e?(t.closest(".defaultChecklist").querySelector(".btnDuplicate").classList.remove("d-none"),t.closest(".defaultChecklist").querySelector(".btnAddDefaultChecklist").style.display="block"):(t.closest(".defaultChecklist").querySelector(".btnDuplicate").style.backgroundColor="white",t.closest(".defaultChecklist").querySelector(".btnDuplicate").classList.add("d-none"),t.closest(".defaultChecklist").querySelector(".btnAddDefaultChecklist").style.display="none")}function changeLayoutBtnsVisibleInEventsAddOptions(e,t){t.closest(".defaultChecklist").querySelector(".btnAddOptions").style.display=e?"block":"none"}function eventsBtnSeeMore(){[...ALL_ELEMENTS(".checklistContent .btnSeeMore")].forEach(e=>{e.addEventListener("click",e=>{showSubchecklistContainer(e.currentTarget.closest(".defaultChecklist"))})})}function eventsDuplicateChecklist(){[...ALL_ELEMENTS(".checklistContent .btnDuplicate")].forEach(e=>{e.addEventListener("click",t=>{let n=getIdToDefaultChecklist(e);verifyDuplicate(filterDefaultChecklist(defaultChecklistArray,n,{}),t.currentTarget)})})}function verifyDuplicate(e,t){e.duplicate=!e.duplicate,e.duplicate?t.style.backgroundColor="#00b800":t.style.backgroundColor="transparent"}function eventsBtnDelete(){[...ALL_ELEMENTS(".checklistContent .btnDelete")].forEach(e=>{e.addEventListener("click",()=>{let t=getIdToDefaultChecklist(e),n=filterDefaultChecklist(defaultChecklistArray,t,{});allEventsAndFunctionsToDelete(t,filterDefaultChecklist(defaultChecklistArray,n.idDefaultChecklist,{}))})})}function allEventsAndFunctionsToDelete(e,t){filterDefaultChecklistToDelete(defaultChecklistArray,e,{}),clearContent(),setChecklistPoint(t.id),showDefaultChecklist(defaultChecklistArray),allEventsInAddChecklist(),eventsBtnSeeMore(),eventsBtnDelete(),eventsBtnAddOptions(),eventsDuplicateChecklist(),verifyBtnSave(),showSubchecklistContainerLoop(defaultChecklistArray)}function clearContent(){ONE_ELEMENT(".checklistContent").innerHTML=""}function eventsBtnAddOptions(){[...ALL_ELEMENTS(".checklistContent .btnAddOptions")].forEach(e=>{e.addEventListener("click",t=>{t.currentTarget.classList.remove("input-danger");let n=getIdToDefaultChecklist(e),l=filterDefaultChecklist(defaultChecklistArray,n,{}),i=l.typechecklist,o=l.points;"3"===i&&openModalMultipleChoose(o,n),"4"===i&&openModalDoubleChoose(o,n)})})}function getIdToDefaultChecklist(e){return parseInt(e.closest(".defaultChecklist").getAttribute("idElement"))}function clearSelected(e){e.forEach(e=>{e.selected=!1,e.pointsValue=0})}function setChecklistPoint(e){let t=filterDefaultChecklist(defaultChecklistArray,e,{}).points,n=filterDefaultChecklistToPoints(defaultChecklistArray,e,[]);console.log(getNumberChecklitWithZero(n));let l=n.length-getNumberChecklitWithZero(n),i=0,o=0;l>0&&(i=t/l,0!==i&&0!==l&&(o=i/t*100)),n.forEach(e=>{0!==e.points?e.idDefaultChecklist!==defaultChecklistArray[0].id?(e.points=i,e.percentage=o,e.correctPercentage=!0):0===e.percentage&&(e.points=0):(i=t/l,0!==i&&0!==l&&(o=i/t*100),e.points=0,e.percentage=0,e.correctPercentage=!0),e.options.length>0&&updatePointsOptions(e.options,e.points,e)})}function getNumberChecklitWithZero(e){let t=0;return e.forEach(e=>{0===e.points&&t++}),t}function updatePointsOptions(e,t,n){let l=n.typechecklist,i=n.onlyOneChoosePoints,o=n.onlyOneChoose,s=n.onlyDistinctPercentage;e.forEach(n=>{let c=e.length,a=t/c,r=a/t*100;if("4"===l)n.selected?n.pointsValue=t:n.pointsValue=0;else if(!1===i&&!1===o)if(s){let e=n.percentage/100*t;n.pointsValue=e,n.percentage=n.percentage,n.correctPercentage=!0}else n.pointsValue=a,n.percentage=r,n.correctPercentage=!0;else(i||o)&&(n.pointsValue=t)})}function verifyCorrectPercentage(e){let t=filterDefaultChecklist(defaultChecklistArray,e,{}),n=t.points,l=filterDefaultChecklistToPoints(defaultChecklistArray,e,[]),i=0;changeLayoutInputDanger(t),l.forEach(e=>{i+=parseFloat(e.points)}),i!=n?l.forEach(e=>{e.points>0?e.correctPercentage=!1:e.correctPercentage=!0}):l.forEach(e=>{e.correctPercentage=!0}),l.forEach(e=>{changeLayoutInputDanger(e)})}function changeLayoutInputDanger(e){let t=ONE_ELEMENT("#defaultCheck"+e.id);!1===e.correctPercentage?(t.querySelector(".defaultChecklist__content").querySelectorAll("input")[2].classList.add("input-danger"),t.querySelector(".defaultChecklist__content").querySelectorAll("input")[3].classList.add("input-danger")):(t.querySelector(".defaultChecklist__content").querySelectorAll("input")[2].classList.remove("input-danger"),t.querySelector(".defaultChecklist__content").querySelectorAll("input")[3].classList.remove("input-danger"))}function showSubchecklistContainer(e){let t=parseInt(e.getAttribute("idElement")),n=filterDefaultChecklist(defaultChecklistArray,t,{});if(e.classList.contains("active"))e.style.height="65px",e.classList.remove("active"),n.active=!1;else{let t=e.querySelectorAll(".checklistContent .defaultChecklist").length,l=65+65*t+35*t;e.style.height=l+"px",e.classList.add("active"),n.active=!0}}function showSubchecklistContainerLoop(e){e.forEach(e=>{let t=ONE_ELEMENT("#defaultCheck"+e.id);if(e.active){let n=t.querySelectorAll(".checklistContent .defaultChecklist").length,l=65+65*n+35*n;t.style.height=l+"px",t.classList.add("active"),e.active=!0}else t.style.height="65px",t.classList.remove("active"),e.active=!1;e.subchecklists.length>0&&showSubchecklistContainerLoop(e.subchecklists)})}function validationDefaultChecklist(e,t){let n=!0,l=e.querySelectorAll("input"),i=e.querySelector("select");return null===t.idDefaultChecklist&&(i=null),removeValidationsLayout(e,l,i),n=addLayoutDangerValidationInputs(0,l,i),n=addLayoutDangerValidationInputs(3,l,i),n}function removeValidationsLayout(e,t,n){ONE_ELEMENT(".alert-header").classList.add("d-none"),e.classList.remove("input-danger"),t[0].classList.remove("input-danger"),t[3].classList.remove("input-danger"),null!==n&&n.classList.remove("input-danger")}function addLayoutDangerValidationInputs(e,t,n){let l=!0;return""==t[e].value&&(t[e].classList.add("input-danger"),l=!1),null!==n&&""===n.value&&(n.classList.add("input-danger"),l=!1),l}function addDefaultChecklist(e=null){verifyIdDefaultChecklist(e,newDefaultChecklistObject(idIncrement+=1,e))}function newDefaultChecklistObject(e,t){return{id:e,idDefaultChecklist:t,name:"",biggerSmaller:"",typechecklist:"",percentage:0,active:!1,correctPercentage:!0,points:"",observation:"",options:[],onlyOneChoose:!1,onlyOneChoosePoints:!1,onlyDistinctPercentage:!1,duplicate:!1,subchecklists:[]}}function verifyIdDefaultChecklist(e,t){if(null!==e){addSubchecklists(findIndexInDefaultChecklist(e),t,e)}else defaultChecklistArray.push(t)}function findIndexInDefaultChecklist(e){return defaultChecklistArray.findIndex(t=>{if(t.id===e)return!0})}function addSubchecklists(e,t,n){if(-1!=e){let n=[...defaultChecklistArray[e].subchecklists];n.push(t),defaultChecklistArray[e].subchecklists=n}else{filterDefaultChecklist(defaultChecklistArray,n,{}).subchecklists.push(t)}}function filterDefaultChecklist(e,t,n){let l=n;return e.forEach(e=>{e.id===t?l=e:e.subchecklists!=[]&&(l=filterDefaultChecklist(e.subchecklists,t,l))}),l}function filterDefaultChecklistNumber(e,t,n=0){let l=n;return e.forEach(e=>{e.id!==t&&l++,e.subchecklists.length>0&&(l=filterDefaultChecklistNumber(e.subchecklists,t,l))}),l}function filterDefaultChecklistToDelete(e,t,n){let l=n;return e.forEach((e,n,i)=>{e.id===t?i.splice(n,1):e.subchecklists!=[]&&(l=filterDefaultChecklistToDelete(e.subchecklists,t,l))}),l}function filterDefaultChecklistToPoints(e,t,n){let l=n;return e.forEach(e=>{e.idDefaultChecklist===t?l.push(e):e.subchecklists!=[]&&(l=filterDefaultChecklistToPoints(e.subchecklists,t,l))}),l}eventCloneDefaultChecklist(),verifyInProgressDefaultChecklist(),ONE_ELEMENT(".btnScrollToTop").addEventListener("click",()=>{let e=ONE_ELEMENT("#btnAddDefaultCheck").getBoundingClientRect();window.scrollBy(e.x,e.y)}),ONE_ELEMENT(".btnScrollToBotttom").addEventListener("click",()=>{let e=ONE_ELEMENT("#btnSave").getBoundingClientRect();window.scrollBy(e.x,e.y)}),ONE_ELEMENT("#btnAddDefaultCheck").addEventListener("click",()=>{checklistSave=!1,addDefaultChecklist(),clearContent(),showDefaultChecklist(defaultChecklistArray),allEventsInAddChecklist(),eventsBtnDelete(),verifyBtnSave(),showSubchecklistContainerLoop(defaultChecklistArray)});var allOptions=[],pointsModal=0,onlyOneChoosePoints=!1,onlyOneChoose=!1,onlyOneDistinctPercentage=!1,onlyOneChoosePointsInputElement=null,onlyOneChooseInputElement=null,onlyDistinctInputElement=null,justViewModal=!1;function openModalMultipleChoose(e,t){pointsModal=e,ONE_ELEMENT("#modalActions").querySelector(".modal-body").innerHTML="",modalLayoutOptionsMultiple(e);let n=modalLayoutRemoveHeader();removeEventsModal(),removeInputDanger(),modalBtnsBlock(),allOptions=[];let l=filterDefaultChecklist(defaultChecklistArray,t,{});verifyOnlyOneChoose(l),verifyOnlyOneChoosePoints(l),verifyOneDistinctPercentage(l),eventOnlyOneChoose(l),eventOnlyOneChoosePoints(l),eventDistinctPercentage(l),verifyOptionsChecklist(l),fillLayoutOptionsDefaultChecklist(!0),eventsMultipleChoose(),eventModalAddBtn(n),eventModalEditBtn(n,l)}function modalLayoutOptionsMultiple(e){ONE_ELEMENT("#modalActions").querySelector(".modal-title").innerHTML="Adicione as opções (multiplas escolhas) Pontuação Checklist "+parseFloat(e).toFixed(2),(onlyOneChoosePointsInputElement=ONE_ELEMENT("#only_one_choose_points").cloneNode(!0)).style.display="block",ONE_ELEMENT("#modalActions").querySelector(".modal-title").append(onlyOneChoosePointsInputElement),(onlyOneChooseInputElement=ONE_ELEMENT("#only_one_choose").cloneNode(!0)).style.display="block",ONE_ELEMENT("#modalActions").querySelector(".modal-title").append(onlyOneChooseInputElement),(onlyDistinctInputElement=ONE_ELEMENT("#only_one_distinct_percentage").cloneNode(!0)).style.display="block",ONE_ELEMENT("#modalActions").querySelector(".modal-title").append(onlyDistinctInputElement)}function modalBtnsBlock(){ONE_ELEMENT("#btnAddModal").style.display="block",ONE_ELEMENT("#btnEditModal").style.display="block"}function modalLayoutRemoveHeader(){let e=ONE_ELEMENT("#modalActions .modal-error-header");return e.style.display="none",e}function verifyOptionsChecklist(e){e.options.length>0&&(allOptions=JSON.parse(JSON.stringify(e.options)),justViewModal=!0)}function eventModalAddBtn(e){ONE_ELEMENT("#btnAddModal").addEventListener("click",()=>{e.style.display="none",justViewModal=!1,removeInputDanger(),addNewsOptionEmpty(!0),fillLayoutOptionsDefaultChecklist(!0),eventsMultipleChoose()})}function eventModalEditBtn(e,t){ONE_ELEMENT("#btnEditModal").addEventListener("click",()=>{verifyEmptyOptionName()?errorDoubleChooseOptions(e):verifyEmptyOptionsArray()?errorMultipleChooseOptions(e):!1===verifyPercentageOptions(e)?(e.style.display="block",e.querySelector(".modal-error-content").innerHTML="Porcentagem das opções estão incorretas!!"):(removeInputDanger(),addOptionsMultiple(t),ONE_ELEMENT("#modalActions .close").click())})}function verifyPercentageOptions(){let e=!0;return allOptions.forEach(t=>{!1===t.correctPercentage&&(e=!1)}),e}function verifyOnlyOneChoose(e){e.onlyOneChoose?(onlyOneChoose=!0,onlyOneChooseInputElement.querySelector("input").checked=!0):(onlyOneChoose=!1,onlyOneChooseInputElement.querySelector("input").checked=!1)}function verifyOnlyOneChoosePoints(e){e.onlyOneChoosePoints?(onlyOneChoosePoints=!0,onlyOneChoosePointsInputElement.querySelector("input").checked=!0):(onlyOneChoosePoints=!1,onlyOneChoosePointsInputElement.querySelector("input").checked=!1)}function verifyOneDistinctPercentage(e){e.onlyDistinctPercentage?(onlyOneDistinctPercentage=!0,onlyDistinctInputElement.querySelector("input").checked=!0):(onlyOneDistinctPercentage=!1,onlyDistinctInputElement.querySelector("input").checked=!1)}function eventOnlyOneChoose(e){ONE_ELEMENT("#only_one_choose").querySelector("input").addEventListener("change",t=>{t.currentTarget.checked?onlyOneChooseChecked(e):onlyOneChooseNotChecked(e),clearModalContent(),clearOptions(e)})}function onlyOneChooseChecked(e){e.onlyOneChoose=!0,onlyOneChoose=!0,e.onlyOneChoosePoints=!1,onlyOneChoosePoints=!1,e.onlyDistinctPercentage=!1,onlyOneDistinctPercentage=!1,ONE_ELEMENT("#only_one_choose_points").querySelector("input").checked=!1,ONE_ELEMENT("#only_one_distinct_percentage").querySelector("input").checked=!1}function onlyOneChooseNotChecked(e){e.onlyOneChoose=!1,onlyOneChoose=!1}function clearOptions(e){allOptions=[],e.options.length>0&&(e.options=[])}function eventOnlyOneChoosePoints(e){ONE_ELEMENT("#only_one_choose_points").querySelector("input").addEventListener("change",t=>{t.currentTarget.checked?onlyOneChoosePointsChecked(e):onlyOneChoosePointsNotChecked(e),clearModalContent(),clearOptions(e)})}function onlyOneChoosePointsChecked(e){e.onlyOneChoosePoints=!0,onlyOneChoosePoints=!0,e.onlyOneChoose=!1,onlyOneChoose=!1,e.onlyDistinctPercentage=!1,onlyOneDistinctPercentage=!1,ONE_ELEMENT("#only_one_choose").querySelector("input").checked=!1,ONE_ELEMENT("#only_one_distinct_percentage").querySelector("input").checked=!1}function onlyOneChoosePointsNotChecked(e){e.onlyOneChoosePoints=!1,onlyOneChoosePoints=!1}function clearOptions(e){allOptions=[],e.options.length>0&&(e.options=[])}function eventDistinctPercentage(e){ONE_ELEMENT("#only_one_distinct_percentage").querySelector("input").addEventListener("change",t=>{t.currentTarget.checked?onlyOneDistinctPercentageCheck(e):onlyOneDistinctPercentageNotCheck(e),clearModalContent(),clearOptions(e)})}function onlyOneDistinctPercentageCheck(e){e.onlyDistinctPercentage=!0,onlyOneDistinctPercentage=!0,e.onlyOneChoosePoints=!1,onlyOneChoosePoints=!1,e.onlyOneChoose=!1,onlyOneChoose=!1,ONE_ELEMENT("#only_one_choose").querySelector("input").checked=!1,ONE_ELEMENT("#only_one_choose_points").querySelector("input").checked=!1}function onlyOneDistinctPercentageNotCheck(e){e.distinctPercentage=!1,onlyOneDistinctPercentage=!1}var modalHeader=null;function openModalDoubleChoose(e,t){clearModalContent(),modalLayoutOptionsDoubleChoose(e),removeEventsModal(),removeInputDanger(),allOptions=[],verifyDefaultChecklistOptions(t),fillLayoutOptionsDefaultChecklist(),eventsDoubleChoose(),modalBtnsDoubleChooseBlock(),eventModalBtnEdit(t)}function modalLayoutOptionsDoubleChoose(e){ONE_ELEMENT("#modalActions").querySelector(".modal-title").innerHTML="Adicione as opções (dupla escolha)  Pontuação Checklist "+parseFloat(e).toFixed(2),pointsModal=e,(modalHeader=ONE_ELEMENT("#modalActions .modal-error-header")).style.display="none"}function modalBtnsDoubleChooseBlock(){ONE_ELEMENT("#btnAddModal").style.display="none",ONE_ELEMENT("#btnEditModal").style.display="block"}function verifyDefaultChecklistOptions(e){let t=filterDefaultChecklist(defaultChecklistArray,e,{});t.options.length>0?allOptions=t.options:addNewsOptionEmpty()}function eventModalBtnEdit(e){ONE_ELEMENT("#btnEditModal").addEventListener("click",()=>{verifyEmptyOptionName()?errorDoubleChooseOptions(modalHeader):verifyEmptyOptionsArray()?showErrorModalDoubleChoose():(removeInputDanger(),addOption(e),ONE_ELEMENT("#modalActions .close").click())})}function showErrorModalDoubleChoose(){modalHeader.style.display="block",modalHeader.querySelector(".alert").innerHTML="Adicione pelo menos uma opção!"}function removeEventsModal(){let e=ONE_ELEMENT("#btnAddModal").cloneNode(!0),t=ONE_ELEMENT("#btnEditModal").cloneNode(!0);ONE_ELEMENT("#modalActions").querySelector(".modal-footer").innerHTML="",ONE_ELEMENT("#modalActions").querySelector(".modal-footer").append(e),ONE_ELEMENT("#modalActions").querySelector(".modal-footer").append(t)}function verifyEmptyOptionName(){let e=!1;return allOptions.forEach(t=>{""===t.nameOption&&(e=!0,idOption=t.id)}),e}function verifyEmptyOptionsArray(){return 0===allOptions.length}function errorDoubleChooseOptions(e){e.style.display="block",e.querySelector(".modal-error-content").innerHTML="Os nomes das opções não podem estar vazias!",[...ALL_ELEMENTS(".optionsDefaultChecklist .optionName")].forEach(e=>{""===e.value&&e.classList.add("input-danger")})}function errorMultipleChooseOptions(e){e.style.display="block",e.querySelector(".modal-error-content").innerHTML="Adicione pelo menos uma opção!"}function removeInputDanger(){[...ALL_ELEMENTS(".optionsDefaultChecklist .optionName")].forEach(e=>{""===e.value&&e.classList.remove("input-danger")})}function addOptionsMultiple(e){e.options=[],allOptions.forEach(t=>{e.options.push(t)})}function addOption(e){let t=filterDefaultChecklist(defaultChecklistArray,e,{});2!=t.options.length&&allOptions.forEach(e=>{t.options.push(e)})}function addNewsOptionEmpty(e=!1){!1===e?addOptionsDoubleChoose():addOptionsMultipleOptions()}function addOptionsDoubleChoose(){for(let e=0;e<2;e++){let t={id:e,nameOption:"",pointsValue:"",percentage:50,selected:!1};0===e?(t.pointsValue=pointsModal,t.selected=!0):(t.pointsValue=0,t.selected=!1),allOptions.push(t)}}function addOptionsMultipleOptions(){let e={id:++idIndentOption,nameOption:"",pointsValue:"",percentage:50,correctPercentage:!0,selected:!1};allOptions.push(e)}function fillLayoutOptionsDefaultChecklist(e=!1){ONE_ELEMENT("#modalActions").querySelector(".modal-body").innerHTML="",allOptions.forEach(t=>{let n=optionsDefaultChecklist.cloneNode(!0);fillLayoutOptionClone(n,t),fillLayoutOptionSelected(n,t),e?(showBtnsOptionsInMultipleModal(n),verifyChecksInputsSelectedInMultipleOptionsModal(n,t)):showBtnsOptionsInDoubleChooseModal(n),n.setAttribute("id","optionDefaultChecklist"+t.id),ONE_ELEMENT("#modalActions").querySelector(".modal-body").append(n)})}function fillLayoutOptionClone(e,t){e.querySelectorAll("input")[0].value=t.nameOption,e.querySelectorAll("input")[1].value=t.percentage>0?t.percentage.toFixed(2):0,e.querySelectorAll("input")[2].value=t.pointsValue>0?t.pointsValue.toFixed(2):0,e.querySelectorAll("input")[2].disabled=!0,e.style.display="flex",e.setAttribute("idOption",t.id)}function fillLayoutOptionSelected(e,t){t.selected?(e.querySelectorAll("input")[2].value=t.pointsValue.toFixed(2),e.querySelector(".btnChoose").classList.remove("btnDisabled")):e.querySelector(".btnChoose").classList.add("btnDisabled")}function showBtnsOptionsInMultipleModal(e){e.querySelectorAll(".defaultChecklist__slot")[1].style.display="block",e.querySelector(".btnDeleteChoose").style.display="block",e.querySelector(".btnChoose").style.display="none"}function showBtnsOptionsInDoubleChooseModal(e){e.querySelectorAll(".defaultChecklist__slot")[1].style.display="none",e.querySelector(".btnChoose").style.display="block",e.querySelector(".btnDeleteChoose").style.display="none"}function setValuesCalcPercentageOptions(e,t){e.querySelectorAll("input")[2].value=calcPercentageEquals()[0].toFixed(2),e.querySelectorAll("input")[1].value=calcPercentageEquals()[1].toFixed(2),t.pointsValue=calcPercentageEquals()[0],t.percentage=calcPercentageEquals()[1]}function verifyChecksInputsSelectedInMultipleOptionsModal(e,t){!1===justViewModal&&(!1===onlyOneChoose&&!1===onlyOneChoosePoints?setValuesCalcPercentageOptions(e,t):setValuesInOptions(e,t))}function setValuesInOptions(e,t){e.querySelectorAll("input")[2].value=pointsModal.toFixed(2),e.querySelectorAll("input")[1].closest(".defaultChecklist__slot").style.display="none",t.pointsValue=pointsModal,t.percentage=calcPercentageEquals()[1]}function eventsDoubleChoose(){[...ALL_ELEMENTS(".optionsDefaultChecklist")].forEach(e=>{uniqueEventsBtnChoose(e),uniqueEventOptionName(e)})}function uniqueEventsBtnChoose(e){e.querySelector(".btnChoose").addEventListener("click",()=>{clearSelected(allOptions),setOptionSelectedAndValue(findIndexOption(parseInt(e.getAttribute("idOption")))),clearModalContent(),fillLayoutOptionsDefaultChecklist(),eventsDoubleChoose()})}function setOptionSelectedAndValue(e){allOptions[e].selected=!0,allOptions[e].pointsValue=pointsModal}function clearModalContent(){ONE_ELEMENT("#modalActions").querySelector(".modal-body").innerHTML=""}function eventsMultipleChoose(){[...ALL_ELEMENTS(".optionsDefaultChecklist")].forEach(e=>{uniqueEventDeleteOption(e),uniqueEventOptionName(e),uniqueEventInputPercentage(e)})}function uniqueEventDeleteOption(e){e.querySelector(".btnDeleteChoose").addEventListener("click",t=>{deleteOption(parseInt(e.getAttribute("idOption"))),validationDeleteOptions(),ONE_ELEMENT("#modalActions").querySelector(".modal-body").innerHTML="",fillLayoutOptionsDefaultChecklist(!0),eventsMultipleChoose(),layoutCorrectPercentageOptions()})}function validationDeleteOptions(){!1===onlyOneDistinctPercentage&&verifyCorrectPercentageOptions()}function deleteOption(e){let t=allOptions.findIndex(t=>{if(t.id===e)return!0});allOptions.splice(t,1)}function uniqueEventOptionName(e){e.querySelectorAll("input")[0].addEventListener("input",t=>{let n=findIndexOption(parseInt(e.getAttribute("idOption")));allOptions[n].nameOption=t.currentTarget.value}),e.querySelectorAll("input")[0].addEventListener("focus",e=>{removeInputDangerOption(event)})}function uniqueEventInputPercentage(e){e.querySelectorAll("input")[1].addEventListener("input",t=>{let n=findIndexOption(parseInt(e.getAttribute("idOption")));calcNewValuePercentage(t.currentTarget.value,allOptions[n])})}function removeInputDangerOption(e){e.currentTarget.classList.remove("input-danger")}function findIndexOption(e){return allOptions.findIndex(t=>{if(t.id===e)return!0})}function calcNewValuePercentage(e,t){let n=parseFloat(e);t.percentage=n;let l=n/100*pointsModal;t.pointsValue=l,setValueInOption(l,t),onlyOneDistinctPercentage?verifyCorrectPercetageDistinct(n,t):verifyCorrectPercentageOptions()}function setValueInOption(e,t){ONE_ELEMENT("#optionDefaultChecklist"+t.id).querySelectorAll("input")[2].value=e.toFixed(2)}function calcPercentageEquals(){let e=allOptions.length,t=pointsModal/e,n=0;return 0!==t&&(n=t/pointsModal*100),[t,n]}function verifyCorrectPercetageDistinct(e,t){t.correctPercentage=!(e>100||e<0),layoutCorrectPercentageOptions()}function verifyCorrectPercentageOptions(){setOptionsCorrectPercentage(getTotalPointsOptions()==pointsModal),layoutCorrectPercentageOptions()}function getTotalPointsOptions(){let e=0;return allOptions.forEach(t=>{e+=parseFloat(t.pointsValue)}),e}function setOptionsCorrectPercentage(e){allOptions.forEach(t=>{t.correctPercentage=e})}function layoutCorrectPercentageOptions(){allOptions.forEach(e=>{if(!1===e.correctPercentage){ONE_ELEMENT("#optionDefaultChecklist"+e.id).querySelectorAll("input")[1].classList.add("input-danger")}else{ONE_ELEMENT("#optionDefaultChecklist"+e.id).querySelectorAll("input")[1].classList.remove("input-danger")}})}var namesChecklists=[];function setChecklistNamesSave(){defaultChecklistArray.forEach(e=>{namesChecklists.push(e.name)})}function setInfoInInputsFormsSave(){ONE_ELEMENT("#default_checklist_json").value=JSON.stringify(defaultChecklistArray),ONE_ELEMENT("#checklist_names").value=namesChecklists.join(","),ONE_ELEMENT("#lastIdIncrement").value=idIncrement,ONE_ELEMENT("#lastIdIncrementOption").value=idIndentOption}function setInfoInInputsFormsFinish(){ONE_ELEMENT("#default_checklist_json_oficial").value=JSON.stringify(defaultChecklistArray),ONE_ELEMENT("#allChecklists").value=JSON.stringify(defaultChecklistArray),ONE_ELEMENT("#lastIdIncrementOficial").value=idIncrement,ONE_ELEMENT("#lastIdIncrementOptionOficial").value=idIndentOption}function showAlertHeader(){ONE_ELEMENT(".alert-header").classList.remove("d-none")}function goToAlertHeader(){let e=ONE_ELEMENT(".alert-header").getBoundingClientRect();window.scrollBy(e.x,e.y-60)}function allValidations(e){let t=[],n=[],l=!1;return e.forEach(e=>{verifyEmptyInputsInValidation(e,n),verifyTypeChecklistInValidation(e,n),verifyCorrectPercentageInValidation(e,n),verifyAgroupingDefaultChecklistWithouChildreenInValidation(e,n),verifyEmptyAndPercentageOptionsInValidation(e,n),verifyDoubleOptionWithoutTwoOptions(e,n),l=verifyIfThereErrors(0,n),!1===l&&(t=e),n=setLayoutValidationIfThereErrors(n,e,t),l&&e.subchecklists.length>0&&(l=allValidations(e.subchecklists))}),l}function verifyIfThereErrors(e,t){let n=!1;return 0===e&&(0===t.length?n=!0:(n=!1,e++)),n}function setLayoutValidationIfThereErrors(e,t,n){return e.length>0&&n.id===t.id&&(e.forEach(e=>{allValidationsLayout(t,e)}),e=[]),e}function verifyEmptyInputsInValidation(e,t){""!==e.name&&""!==e.percentage&&""!==e.points||t.push(ERROR_EMPTY_INPUTS),"8"===e.typechecklist&&""===e.biggerSmaller&&t.push(ERROR_EMPTY_INPUTS)}function verifyTypeChecklistInValidation(e,t){""===e.typechecklist&&null!==e.idDefaultChecklist&&t.push(ERROR_SELECT_VALUE)}function verifyCorrectPercentageInValidation(e,t){!1===e.correctPercentage&&t.push(ERROR_PERCENTAGE)}function verifyAgroupingDefaultChecklistWithouChildreenInValidation(e,t){null===e.idDefaultChecklist&&0===e.subchecklists.length&&t.push(ERROR_SUBCHECKLIST_FATHER),"0"!==e.typechecklist&&"7"!==e.typechecklist||0===e.subchecklists.length&&t.push(ERROR_GROUPING)}function verifyEmptyAndPercentageOptionsInValidation(e,t){if("3"===e.typechecklist){e.options.length<1&&t.push(ERROR_EMPTY_OPTIONS),e.options.forEach(e=>{!1===e.correctPercentage&&t.push(ERROR_OPTIONS_PERCETAGE)})}}function verifyDoubleOptionWithoutTwoOptions(e,t){if("4"===e.typechecklist){2!=e.options.length&&t.push(ERROR_EMPTY_DOUBLE_OPTIONS)}}ONE_ELEMENT("#btnSave").addEventListener("click",()=>{if(""!==defaultChecklistArray[0].name)setChecklistNamesSave(),setInfoInInputsFormsSave(),ONE_ELEMENT("#formChecklistsJson").submit();else{let e=ONE_ELEMENT(".alert-header");e.classList.remove("d-none"),e.querySelector(".alert").innerHTML="Coloque pelo menos o nome da checklist principal."}}),ONE_ELEMENT("#btnFinish").addEventListener("click",()=>{allValidations(defaultChecklistArray)&&(setInfoInInputsFormsFinish(),ONE_ELEMENT("#formChecklists").submit())});const ERROR_EMPTY_INPUTS=1,ERROR_SELECT_VALUE=2,ERROR_PERCENTAGE=3,ERROR_SUBCHECKLIST_FATHER=4,ERROR_EMPTY_DOUBLE_OPTIONS=5,ERROR_EMPTY_OPTIONS=6,ERROR_OPTIONS_PERCETAGE=7,ERROR_GROUPING=8;function allValidationsLayout(e,t){verifyErrorAndAddDanger(t,ONE_ELEMENT("#defaultCheck"+e.id),e),showAlertHeader(),goToAlertHeader(),ONE_ELEMENT(".alert-header").querySelector(".alert").innerHTML=["","Há campos obrigatórios das checklist que não foram preenchidos!","Há checklists que não foram definidas seu tipo!","Há checklists que suas pontuações estão desiguais!","Há checklists principais que precisam das subchecklists!","Há checklists do tipo (dupla escolha) sem opções!","Há checklists do tipo (multiplas escolhas) sem opções!","Há checklists do tipo (multiplas escolhas) com a porcentagem incorreta!","Há checklists do tipo (agrupamento) que precisam ter pelo menos uma subchecklist!"][t]}function verifyErrorAndAddDanger(e,t,n){if(e===ERROR_EMPTY_INPUTS&&verifyInpusWithEmptyValue(t,n),e===ERROR_PERCENTAGE){let e=t.querySelectorAll("input");e[2].classList.add("input-danger"),e[3].classList.add("input-danger")}e===ERROR_SELECT_VALUE&&t.querySelector("select").classList.add("input-danger"),e===ERROR_SUBCHECKLIST_FATHER&&t.classList.add("input-danger"),e!==ERROR_EMPTY_DOUBLE_OPTIONS&&e!==ERROR_EMPTY_OPTIONS&&e!==ERROR_OPTIONS_PERCETAGE||t.querySelector(".btnAddOptions").classList.add("input-danger"),e===ERROR_GROUPING&&t.querySelector(".btnAddDefaultChecklist").classList.add("input-danger")}function verifyInpusWithEmptyValue(e,t){let n=e.querySelectorAll("input");setDangerInputsInValidation(n[0]),setDangerInputsInValidation(n[1]),setDangerInputsInValidation(n[2]),setDangerInputsInValidation(n[3])}function setDangerInputsInValidation(e){""===e.value&&e.classList.add("input-danger")}