var defaultChecklist=ONE_ELEMENT(".defaultChecklist");let defaultChecklistJson=ONE_ELEMENT("#default_checklist_json").value;var defaultChecklistArray=""!==defaultChecklistJson?JSON.parse(ONE_ELEMENT("#default_checklist_json").value):[],idIncrement=1,idIndentOption=1,optionsDefaultChecklist=ONE_ELEMENT(".optionsDefaultChecklist");function eventCloneDefaultChecklist(){ALL_ELEMENTS(".defaultCheckRadio").forEach(e=>{e.addEventListener("change",e=>{let t=e.currentTarget.previousElementSibling;defaultChecklistArray=JSON.parse(t.value),idIncrement=parseInt(t.getAttribute("lastidincrement")),idIndentOption=parseInt(t.getAttribute("lastidincrementoption")),ONE_ELEMENT(".checklistContent").innerHTML="",showDefaultChecklist(defaultChecklistArray),eventsDefaultChecklist(!0),eventsBtnDelete(),verifyBtnSave(),showSubchecklistContainerLoop(defaultChecklistArray)})})}function verifyInProgressDefaultChecklist(){""!=defaultChecklistJson&&(idIncrement=parseInt(ONE_ELEMENT("#lastIdIncrement").value),idIndentOption=parseInt(ONE_ELEMENT("#lastIdIncrementOption").value),ONE_ELEMENT(".checklistContent").innerHTML="",showDefaultChecklist(defaultChecklistArray),eventsDefaultChecklist(!0),eventsBtnDelete(),verifyBtnSave(),showSubchecklistContainerLoop(defaultChecklistArray))}function verifyBtnSave(){defaultChecklistArray.length>0?(ONE_ELEMENT("#btnSave").classList.remove("d-none"),ONE_ELEMENT("#btnFinish").classList.remove("d-none")):(ONE_ELEMENT("#btnSave").classList.add("d-none"),ONE_ELEMENT("#btnFinish").classList.add("d-none"))}function showDefaultChecklist(e){e.map(e=>{let t=defaultChecklist.cloneNode(!0);t.style.display="flex",fillInputsAndAttributeDefaultChecklist(t,e),verifyIdDefaultNullSelectDisabled(t,e),verifyCorrectPercentageInputDanger(t,e),verifyIdDefaultNullInputDanger(t,e),verifySubchecklists(t,e),verifySubchecklistsLengthBtnSeeMore(t,e),verifyTypeSubchecklist(t,e),verifyActiveDefaultChecklist(t,e),verifyDuplicateButton(t,e),verifyBtnScroll(),appendDefaultChecklist(t,e),setChecklistPoint(e.id),repeatLoopShowDefaultChecklist(e)})}function fillInputsAndAttributeDefaultChecklist(e,t){e.setAttribute("idElement",t.id),e.setAttribute("id","defaultCheck"+t.id),e.querySelectorAll("input")[0].value=t.name,e.querySelectorAll("input")[1].value=parseFloat(t.percentage).toFixed(2),e.querySelectorAll("input")[2].value=parseFloat(t.points).toFixed(2),e.querySelectorAll("input")[3].value=t.observation}function verifyIdDefaultNullSelectDisabled(e,t){null===t.idDefaultChecklist?(e.querySelector("select").disabled=!0,e.querySelector("select").value=0,e.querySelector(".btnAddDefaultChecklist").style.display="block"):e.querySelector("select").value=t.typechecklist.toString()}function verifyIdDefaultNullInputDanger(e,t){null!==t.idDefaultChecklist&&(e.querySelectorAll("input")[1].disabled=!1,e.querySelectorAll("input")[2].disabled=!0)}function verifyCorrectPercentageInputDanger(e,t){t.correctPercentage?e.querySelectorAll("input")[2].classList.remove("input-danger"):e.querySelectorAll("input")[2].classList.add("input-danger")}function verifySubchecklists(e,t){0===t.subchecklists.length&&null===t.idDefaultChecklist?e.querySelectorAll("input")[2].disabled=!1:e.querySelectorAll("input")[2].disabled=!0}function verifySubchecklistsLengthBtnSeeMore(e,t){0===t.subchecklists.length?e.querySelector(".btnSeeMore").style.display="none":e.querySelector(".btnSeeMore").style.display="block"}function verifyTypeSubchecklist(e,t){"3"===t.typechecklist||"4"===t.typechecklist?e.querySelector(".btnAddOptions").style.display="block":e.querySelector(".btnAddOptions").style.display="none","0"!==t.typechecklist&&"7"!==t.typechecklist||(e.querySelector(".btnAddDefaultChecklist").style.display="block"),"0"!==t.typechecklist&&"7"!==t.typechecklist||""!=t.idDefaultChecklist&&e.querySelector(".btnDuplicate").classList.remove("d-none")}function verifyActiveDefaultChecklist(e,t){t.active&&e.classList.add("active")}function verifyDuplicateButton(e,t){t.duplicate?e.querySelector(".btnDuplicate").style.backgroundColor="#00b800":e.querySelector(".btnDuplicate").style.backgroundColor="transparent"}function verifyBtnScroll(){defaultChecklistArray.length>0?ONE_ELEMENT(".actionsScroll").style.display="flex":ONE_ELEMENT(".actionsScroll").style.display="none"}function appendDefaultChecklist(e,t){if(null!=t.idDefaultChecklist){ONE_ELEMENT("#defaultCheck"+t.idDefaultChecklist).querySelector(".defaultChecklist__container").append(e)}else ONE_ELEMENT(".checklistContent").append(e)}function repeatLoopShowDefaultChecklist(e){e.subchecklists.length>0&&showDefaultChecklist(e.subchecklists)}function downScrollNewDefaultChecklist(){[...ALL_ELEMENTS(".checklistContent .btnAddDefaultChecklist")].forEach(e=>{if(parseInt(e.closest(".defaultChecklist").getAttribute("idElement"))===idIncrement){let t=e.closest(".defaultChecklist").getBoundingClientRect();window.scrollBy(t.x,t.y)}})}function newDefaultChecklistEffect(){[...ALL_ELEMENTS(".checklistContent .btnAddDefaultChecklist")].forEach(e=>{parseInt(e.closest(".defaultChecklist").getAttribute("idElement"))===idIncrement&&(e.closest(".defaultChecklist").style.backgroundColor="rgb(237 237 237)")})}function eventsDefaultChecklist(e=!1){[...ALL_ELEMENTS(".checklistContent .btnAddDefaultChecklist")].forEach(t=>{let l=parseInt(t.closest(".defaultChecklist").getAttribute("idElement")),n=t.closest(".defaultChecklist"),i=filterDefaultChecklist(defaultChecklistArray,l,{});t.addEventListener("click",e=>{validationDefaultChecklist(e.currentTarget.closest(".defaultChecklist"),i)&&(ONE_ELEMENT(".checklistContent").innerHTML="",addDefaultChecklist(l),i.active=!0,showDefaultChecklist(defaultChecklistArray),eventsDefaultChecklist(),eventsBtnSeeMore(),eventsBtnDelete(),eventsDuplicateChecklist(),verifyBtnSave(),eventsBtnAddOptions(),showSubchecklistContainerLoop(defaultChecklistArray),downScrollNewDefaultChecklist(),newDefaultChecklistEffect(),typechecklistModal="")}),e&&validationDefaultChecklist(n,i)&&(ONE_ELEMENT(".checklistContent").innerHTML="",i.active=!0,showDefaultChecklist(defaultChecklistArray),eventsDefaultChecklist(),eventsBtnSeeMore(),eventsBtnDelete(),eventsDuplicateChecklist(),verifyBtnSave(),eventsBtnAddOptions(),showSubchecklistContainerLoop(defaultChecklistArray),typechecklistModal=""),uniqueEventInputChecklistName(n,i),uniqueEventInputPointingPercentage(n,i),uniqueEventPointingNumber(n,i),uniqueEventObservation(n,i),uniqueEventFocusInputDanger(n,i),uniqueEventTypeChecklist(n,i)})}function uniqueEventInputChecklistName(e,t){e.querySelectorAll("input")[0].addEventListener("keyup",e=>{let l=e.currentTarget.value;t.name=l})}function uniqueEventInputPointingPercentage(e,t){e.querySelectorAll("input")[1].addEventListener("input",e=>{idDefaultChecklistFather=calcPointing(e,t),verifyCorrectPercentage(idDefaultChecklistFather)})}function calcPointing(e,t){let l=parseFloat(e.currentTarget.value);t.percentage=l;let n=filterDefaultChecklist(defaultChecklistArray,t.idDefaultChecklist,{}),i=l/100*n.points;if(t.points=i,ONE_ELEMENT("#defaultCheck"+t.id).querySelectorAll("input")[2].value=parseFloat(i).toFixed(2),t.subchecklists.length>0){let e=i/t.subchecklists.length;t.subchecklists.forEach(t=>{updatedSubchecklistPoints(t.id,e)})}return n.id}function updatedSubchecklistPoints(e,t){let l=filterDefaultChecklist(defaultChecklistArray,e,{});if(ONE_ELEMENT("#defaultCheck"+l.id).querySelectorAll("input")[2].value=parseFloat(t).toFixed(2),l.subchecklists.length>0){let e=t/l.subchecklists.length;l.subchecklists.forEach(t=>{updatedSubchecklistPoints(t.id,e)})}}function uniqueEventPointingNumber(e,t){e.querySelectorAll("input")[2].addEventListener("input",l=>{let n=l.currentTarget.value;t.points=n,t.percentage=100,e.querySelectorAll("input")[1].value=100})}function uniqueEventObservation(e,t){e.querySelectorAll("input")[3].addEventListener("keyup",e=>{let l=e.currentTarget.value;t.observation=l})}function uniqueEventFocusInputDanger(e){e.querySelectorAll("input")[0].addEventListener("focus",t=>{t.currentTarget.classList.remove("input-danger"),e.classList.remove("input-danger"),ONE_ELEMENT(".alert-header").classList.add("d-none")}),e.querySelectorAll("input")[2].addEventListener("focus",t=>{t.currentTarget.classList.remove("input-danger"),e.classList.remove("input-danger"),ONE_ELEMENT(".alert-header").classList.add("d-none")}),e.querySelectorAll("input")[3].addEventListener("focus",t=>{t.currentTarget.classList.remove("input-danger"),e.classList.remove("input-danger"),ONE_ELEMENT(".alert-header").classList.add("d-none")})}function uniqueEventTypeChecklist(e,t){null!==e.querySelector("select")&&e.querySelector("select").addEventListener("change",l=>{let n=l.currentTarget.value;t.typechecklist=n,l.currentTarget.classList.remove("input-danger"),"0"===n||"7"===n?(l.currentTarget.closest(".defaultChecklist").querySelector(".btnDuplicate").classList.remove("d-none"),l.currentTarget.closest(".defaultChecklist").querySelector(".btnAddDefaultChecklist").style.display="block"):(l.currentTarget.closest(".defaultChecklist").querySelector(".btnDuplicate").classList.add("d-none"),l.currentTarget.closest(".defaultChecklist").querySelector(".btnAddDefaultChecklist").style.display="none"),"3"===n||"4"===n?(l.currentTarget.closest(".defaultChecklist").querySelector(".btnAddOptions").style.display="block",l.currentTarget.closest(".defaultChecklist").querySelector(".btnAddOptions").setAttribute("type",n)):e.closest(".defaultChecklist").querySelector(".btnAddOptions").style.display="none",t.options=[]})}function eventsBtnSeeMore(){[...ALL_ELEMENTS(".checklistContent .btnSeeMore")].forEach(e=>{e.addEventListener("click",e=>{showSubchecklistContainer(e.currentTarget.closest(".defaultChecklist"))})})}function eventsDuplicateChecklist(){[...ALL_ELEMENTS(".checklistContent .btnDuplicate")].forEach(e=>{e.addEventListener("click",e=>{let t=parseInt(e.currentTarget.closest(".defaultChecklist").getAttribute("idElement")),l=filterDefaultChecklist(defaultChecklistArray,t,{});l.duplicate=!l.duplicate,l.duplicate?e.currentTarget.style.backgroundColor="#00b800":e.currentTarget.style.backgroundColor="transparent"})})}function eventsBtnDelete(){[...ALL_ELEMENTS(".checklistContent .btnDelete")].forEach(e=>{e.addEventListener("click",e=>{let t=parseInt(e.currentTarget.closest(".defaultChecklist").getAttribute("idElement")),l=filterDefaultChecklist(defaultChecklistArray,t,{}),n=filterDefaultChecklist(defaultChecklistArray,l.idDefaultChecklist,{});filterDefaultChecklistToDelete(defaultChecklistArray,t,{}),ONE_ELEMENT(".checklistContent").innerHTML="",setChecklistPoint(n.id),showDefaultChecklist(defaultChecklistArray),eventsDefaultChecklist(),eventsBtnSeeMore(),eventsBtnDelete(),eventsBtnAddOptions(),eventsDuplicateChecklist(),verifyBtnSave(),showSubchecklistContainerLoop(defaultChecklistArray)})})}eventCloneDefaultChecklist(),verifyInProgressDefaultChecklist(),ONE_ELEMENT(".btnScrollToTop").addEventListener("click",()=>{let e=ONE_ELEMENT("#btnAddDefaultCheck").getBoundingClientRect();window.scrollBy(e.x,e.y)}),ONE_ELEMENT(".btnScrollToBotttom").addEventListener("click",()=>{let e=ONE_ELEMENT("#btnSave").getBoundingClientRect();window.scrollBy(e.x,e.y)}),ONE_ELEMENT("#btnAddDefaultCheck").addEventListener("click",e=>{addDefaultChecklist(),ONE_ELEMENT(".checklistContent").innerHTML="",showDefaultChecklist(defaultChecklistArray),eventsDefaultChecklist(),eventsBtnDelete(),verifyBtnSave(),showSubchecklistContainerLoop(defaultChecklistArray)});var typechecklistModal="";function eventsBtnAddOptions(){[...ALL_ELEMENTS(".checklistContent .btnAddOptions")].forEach(e=>{e.addEventListener("click",e=>{e.currentTarget.classList.remove("input-danger");let t=parseInt(e.currentTarget.closest(".defaultChecklist").getAttribute("idelement")),l=filterDefaultChecklist(defaultChecklistArray,t,{}),n=l.typechecklist,i=l.points;"3"===n&&openModalMultipleChoose(i,t),"4"===n&&openModalDoubleChoose(i,t)})})}function clearSelected(e){e.forEach(e=>{e.selected=!1,e.pointsValue=0})}function setChecklistPoint(e){let t=filterDefaultChecklist(defaultChecklistArray,e,{}).points,l=filterDefaultChecklistToPoints(defaultChecklistArray,e,[]),n=t/l.length,i=n/t*100;l.forEach(e=>{e.points=n,e.percentage=i,e.correctPercentage=!0,e.options.length>0&&updatePointsOptions(e.options,e.points,e)})}function updatePointsOptions(e,t,l){let n=l.typechecklist,i=l.onlyOneChoosePoints,s=l.onlyOneChoose;e.forEach(l=>{let o=e.length,c=t/o,a=c/t*100;"4"===n?l.selected?l.pointsValue=t:l.pointsValue=0:!1===i&&!1===s?(l.pointsValue=c,l.percentage=a,l.correctPercentage=!0):(i||s)&&(l.pointsValue=t)})}function verifyCorrectPercentage(e){let t=filterDefaultChecklist(defaultChecklistArray,e,{}).points,l=filterDefaultChecklistToPoints(defaultChecklistArray,e,[]),n=0;l.forEach(e=>{n+=parseFloat(e.points)}),n!=t?l.forEach(e=>{e.correctPercentage=!1}):l.forEach(e=>{e.correctPercentage=!0}),l.forEach(e=>{if(!1===e.correctPercentage){ONE_ELEMENT("#defaultCheck"+e.id).querySelectorAll("input")[2].classList.add("input-danger")}else{ONE_ELEMENT("#defaultCheck"+e.id).querySelectorAll("input")[2].classList.remove("input-danger")}})}function showSubchecklistContainer(e){let t=parseInt(e.getAttribute("idElement")),l=filterDefaultChecklist(defaultChecklistArray,t,{});if(e.classList.contains("active"))e.style.height="65px",e.classList.remove("active"),l.active=!1;else{let t=e.querySelectorAll(".checklistContent .defaultChecklist").length,n=65+65*t+35*t;e.style.height=n+"px",e.classList.add("active"),l.active=!0}}function showSubchecklistContainerLoop(e){e.forEach(e=>{let t=ONE_ELEMENT("#defaultCheck"+e.id);if(e.active){let l=t.querySelectorAll(".checklistContent .defaultChecklist").length,n=65+65*l+35*l;t.style.height=n+"px",t.classList.add("active"),e.active=!0}else t.style.height="65px",t.classList.remove("active"),e.active=!1;e.subchecklists.length>0&&showSubchecklistContainerLoop(e.subchecklists)})}function validationDefaultChecklist(e,t){let l=!0,n=e.querySelectorAll("input"),i=e.querySelector("select");return null===t.idDefaultChecklist&&(i=null),ONE_ELEMENT(".alert-header").classList.add("d-none"),e.classList.remove("input-danger"),n[0].classList.remove("input-danger"),n[2].classList.remove("input-danger"),null!==i&&i.classList.remove("input-danger"),""==n[0].value&&(n[0].classList.add("input-danger"),l=!1),!1===t.correctPercentage&&(l=!1),""==n[2].value&&(n[2].classList.add("input-danger"),l=!1),null!==i&&""===i.value&&(i.classList.add("input-danger"),l=!1),l}function addDefaultChecklist(e=null){let t={id:idIncrement+=1,idDefaultChecklist:e,name:"",typechecklist:"",percentage:"",active:!1,correctPercentage:!0,points:"",observation:"",options:[],onlyOneChoose:!1,onlyOneChoosePoints:!1,duplicate:!1,subchecklists:[]};if(null!==e){let l=defaultChecklistArray.findIndex(t=>{if(t.id===e)return!0});if(-1!=l){let e=[...defaultChecklistArray[l].subchecklists];e.push(t),defaultChecklistArray[l].subchecklists=e}else{filterDefaultChecklist(defaultChecklistArray,e,{}).subchecklists.push(t)}}else defaultChecklistArray.push(t)}function filterDefaultChecklist(e,t,l){let n=l;return e.forEach(e=>{e.id===t?n=e:e.subchecklists!=[]&&(n=filterDefaultChecklist(e.subchecklists,t,n))}),n}function filterDefaultChecklistNumber(e,t,l=0){let n=l;return e.forEach(e=>{e.id!==t&&n++,e.subchecklists.length>0&&(n=filterDefaultChecklistNumber(e.subchecklists,t,n))}),n}function filterDefaultChecklistToDelete(e,t,l){let n=l;return e.forEach((e,l,i)=>{e.id===t?i.splice(l,1):e.subchecklists!=[]&&(n=filterDefaultChecklistToDelete(e.subchecklists,t,n))}),n}function filterDefaultChecklistToPoints(e,t,l){let n=l;return e.forEach(e=>{e.idDefaultChecklist===t?n.push(e):e.subchecklists!=[]&&(n=filterDefaultChecklistToPoints(e.subchecklists,t,n))}),n}var allOptions=[],pointsModal=0,onlyOneChoosePoints=!1,onlyOneChoose=!1;function openModalMultipleChoose(e,t){ONE_ELEMENT("#modalActions").querySelector(".modal-body").innerHTML="",ONE_ELEMENT("#modalActions").querySelector(".modal-title").innerHTML="Adicione as opções (multiplas escolhas) Pontuação Checklist "+parseFloat(e).toFixed(2);let l=ONE_ELEMENT("#only_one_choose_points").cloneNode(!0);l.style.display="block",ONE_ELEMENT("#modalActions").querySelector(".modal-title").append(l);let n=ONE_ELEMENT("#only_one_choose").cloneNode(!0);n.style.display="block",ONE_ELEMENT("#modalActions").querySelector(".modal-title").append(n),pointsModal=e;let i=ONE_ELEMENT("#modalActions .modal-error-header");i.style.display="none",removeEventsModal(),removeInputDanger(),ONE_ELEMENT("#btnAddModal").style.display="block",ONE_ELEMENT("#btnEditModal").style.display="block",allOptions=[];let s=filterDefaultChecklist(defaultChecklistArray,t,{});verifyOnlyOneChoose(s,n),verifyOnlyOneChoosePoints(s,l),eventOnlyOneChoose(s),eventOnlyOneChoosePoints(s),s.options.length>0&&(allOptions=s.options),fillLayoutOptionsDefaultChecklist(!0,onlyOneChoose,onlyOneChoosePoints),eventsMultipleChoose(),ONE_ELEMENT("#btnAddModal").addEventListener("click",()=>{i.style.display="none",removeInputDanger(),addNewsOptionEmpty(!0),fillLayoutOptionsDefaultChecklist(!0,onlyOneChoose,onlyOneChoosePoints),eventsMultipleChoose()}),ONE_ELEMENT("#btnEditModal").addEventListener("click",()=>{verifyEmptyOptionName()?errorDoubleChooseOptions(i):verifyEmptyOptionsArray()?errorMultipleChooseOptions(i):!1===verifyPercentageOptions(i)?(i.style.display="block",i.querySelector(".modal-error-content").innerHTML="Porcentagem das opções estão incorretas!!"):(removeInputDanger(),addOptionsMultiple(s),ONE_ELEMENT("#modalActions .close").click())})}function verifyPercentageOptions(){let e=!0;return allOptions.forEach(t=>{!1===t.correctPercentage&&(e=!1)}),e}function verifyOnlyOneChoose(e,t){e.onlyOneChoose?(onlyOneChoose=!0,t.querySelector("input").checked=!0):(onlyOneChoose=!1,t.querySelector("input").checked=!1)}function verifyOnlyOneChoosePoints(e,t){e.onlyOneChoosePoints?(onlyOneChoosePoints=!0,t.querySelector("input").checked=!0):(onlyOneChoosePoints=!1,t.querySelector("input").checked=!1)}function eventOnlyOneChoose(e){ONE_ELEMENT("#only_one_choose").querySelector("input").addEventListener("change",t=>{t.currentTarget.checked?(e.onlyOneChoose=!0,onlyOneChoose=!0,e.onlyOneChoosePoints=!1,onlyOneChoosePoints=!1,ONE_ELEMENT("#only_one_choose_points").querySelector("input").checked=!1):(e.onlyOneChoose=!1,onlyOneChoose=!1),ONE_ELEMENT("#modalActions").querySelector(".modal-body").innerHTML="",allOptions=[],e.options.length>0&&(e.options=[])})}function eventOnlyOneChoosePoints(e){ONE_ELEMENT("#only_one_choose_points").querySelector("input").addEventListener("change",t=>{t.currentTarget.checked?(e.onlyOneChoosePoints=!0,onlyOneChoosePoints=!0,e.onlyOneChoose=!1,onlyOneChoose=!1,ONE_ELEMENT("#only_one_choose").querySelector("input").checked=!1):(e.onlyOneChoosePoints=!1,onlyOneChoosePoints=!1),ONE_ELEMENT("#modalActions").querySelector(".modal-body").innerHTML="",allOptions=[],e.options.length>0&&(e.options=[])})}function openModalDoubleChoose(e,t){ONE_ELEMENT("#modalActions").querySelector(".modal-body").innerHTML="",ONE_ELEMENT("#modalActions").querySelector(".modal-title").innerHTML="Adicione as opções (dupla escolha)  Pontuação Checklist "+parseFloat(e).toFixed(2),pointsModal=e;let l=ONE_ELEMENT("#modalActions .modal-error-header");l.style.display="none",removeEventsModal(),removeInputDanger(),allOptions=[];let n=filterDefaultChecklist(defaultChecklistArray,t,{});n.options.length>0?allOptions=n.options:addNewsOptionEmpty(),fillLayoutOptionsDefaultChecklist(),eventsDoubleChoose(),ONE_ELEMENT("#btnAddModal").style.display="none",ONE_ELEMENT("#btnEditModal").style.display="block",ONE_ELEMENT("#btnEditModal").addEventListener("click",()=>{verifyEmptyOptionName()?errorDoubleChooseOptions(l):verifyEmptyOptionsArray()?(l.style.display="block",l.querySelector(".alert").innerHTML="Adicione pelo menos uma opção!"):(removeInputDanger(),addOption(n),ONE_ELEMENT("#modalActions .close").click())})}function removeEventsModal(){let e=ONE_ELEMENT("#btnAddModal").cloneNode(!0),t=ONE_ELEMENT("#btnEditModal").cloneNode(!0);ONE_ELEMENT("#modalActions").querySelector(".modal-footer").innerHTML="",ONE_ELEMENT("#modalActions").querySelector(".modal-footer").append(e),ONE_ELEMENT("#modalActions").querySelector(".modal-footer").append(t)}function verifyEmptyOptionName(){let e=!1;return allOptions.forEach(t=>{""===t.nameOption&&(e=!0,idOption=t.id)}),e}function verifyEmptyOptionsArray(){return 0===allOptions.length}function errorDoubleChooseOptions(e){e.style.display="block",e.querySelector(".modal-error-content").innerHTML="Os nomes das opções não podem estar vazias!",[...ALL_ELEMENTS(".optionsDefaultChecklist .optionName")].forEach(e=>{""===e.value&&e.classList.add("input-danger")})}function errorMultipleChooseOptions(e){e.style.display="block",e.querySelector(".modal-error-content").innerHTML="Adicione pelo menos uma opção!"}function removeInputDanger(){[...ALL_ELEMENTS(".optionsDefaultChecklist .optionName")].forEach(e=>{""===e.value&&e.classList.remove("input-danger")})}function addOptionsMultiple(e){e.options=[],allOptions.forEach(t=>{e.options.push(t)})}function addOption(e){2!=e.options.length&&allOptions.forEach(t=>{e.options.push(t)})}function addNewsOptionEmpty(e=!1){if(!1===e)for(let e=0;e<2;e++){let t={id:e,nameOption:"",pointsValue:"",percentage:50,selected:!1};0===e?(t.pointsValue=pointsModal,t.selected=!0):(t.pointsValue=0,t.selected=!1),allOptions.push(t)}else{let e={id:++idIndentOption,nameOption:"",pointsValue:"",percentage:50,correctPercentage:!0,selected:!1};allOptions.push(e)}}function fillLayoutOptionsDefaultChecklist(e=!1,t=!1,l=!1){ONE_ELEMENT("#modalActions").querySelector(".modal-body").innerHTML="",allOptions.forEach(n=>{let i=optionsDefaultChecklist.cloneNode(!0);i.querySelectorAll("input")[0].value=n.nameOption,i.querySelectorAll("input")[2].disabled=!0,i.style.display="flex",i.setAttribute("idOption",n.id),n.selected?(i.querySelectorAll("input")[2].value=n.pointsValue.toFixed(2),i.querySelector(".btnChoose").classList.remove("btnDisabled")):i.querySelector(".btnChoose").classList.add("btnDisabled"),e?(i.querySelectorAll(".defaultChecklist__slot")[1].style.display="block",i.querySelector(".btnDeleteChoose").style.display="block",i.querySelector(".btnChoose").style.display="none",!1===t&&!1===l?(i.querySelectorAll("input")[2].value=calcPercentageEquals()[0].toFixed(2),i.querySelectorAll("input")[1].value=calcPercentageEquals()[1].toFixed(2),n.pointsValue=calcPercentageEquals()[0],n.percentage=calcPercentageEquals()[1]):(i.querySelectorAll("input")[2].value=pointsModal.toFixed(2),i.querySelectorAll("input")[1].closest(".defaultChecklist__slot").style.display="none",n.pointsValue=pointsModal,n.percentage=calcPercentageEquals()[1])):(i.querySelectorAll(".defaultChecklist__slot")[1].style.display="none",i.querySelector(".btnChoose").style.display="block",i.querySelector(".btnDeleteChoose").style.display="none"),i.setAttribute("id","optionDefaultChecklist"+n.id),ONE_ELEMENT("#modalActions").querySelector(".modal-body").append(i)})}function eventsDoubleChoose(){[...ALL_ELEMENTS(".optionsDefaultChecklist")].forEach(e=>{uniqueEventsBtnChoose(e),uniqueEventOptionName(e)})}function uniqueEventsBtnChoose(e){e.querySelector(".btnChoose").addEventListener("click",t=>{clearSelected(allOptions);let l=parseInt(e.getAttribute("idOption")),n=allOptions.findIndex(e=>{if(e.id===l)return!0});allOptions[n].selected=!0,allOptions[n].pointsValue=pointsModal,ONE_ELEMENT("#modalActions").querySelector(".modal-body").innerHTML="",fillLayoutOptionsDefaultChecklist(),eventsDoubleChoose()})}function eventsMultipleChoose(){[...ALL_ELEMENTS(".optionsDefaultChecklist")].forEach(e=>{uniqueEventDeleteOption(e),uniqueEventOptionName(e),uniqueEventInputPercentage(e)})}function uniqueEventDeleteOption(e){e.querySelector(".btnDeleteChoose").addEventListener("click",t=>{deleteOption(parseInt(e.getAttribute("idOption"))),ONE_ELEMENT("#modalActions").querySelector(".modal-body").innerHTML="",fillLayoutOptionsDefaultChecklist(!0,onlyOneChoose),eventsMultipleChoose()})}function deleteOption(e){let t=allOptions.findIndex(t=>{if(t.id===e)return!0});allOptions.splice(t,1)}function uniqueEventOptionName(e){e.querySelectorAll("input")[0].addEventListener("input",t=>{let l=parseInt(e.getAttribute("idOption")),n=allOptions.findIndex(e=>{if(e.id===l)return!0});allOptions[n].nameOption=t.currentTarget.value}),e.querySelectorAll("input")[0].addEventListener("focus",e=>{e.currentTarget.classList.remove("input-danger")})}function uniqueEventInputPercentage(e){e.querySelectorAll("input")[1].addEventListener("input",t=>{let l=parseInt(e.getAttribute("idOption")),n=allOptions.findIndex(e=>{if(e.id===l)return!0});allOptions[n].percentage,calcNewValuePercentage(t,allOptions[n])})}function calcNewValuePercentage(e,t){let l=parseFloat(e.currentTarget.value);t.percentage=l;let n=l/100*pointsModal;t.pointsValue=n,ONE_ELEMENT("#optionDefaultChecklist"+t.id).querySelectorAll("input")[2].value=n.toFixed(2),verifyCorrectPercentageOptions()}function calcPercentageEquals(){let e=allOptions.length,t=pointsModal/e;return[t,t/pointsModal*100]}function verifyCorrectPercentageOptions(){let e=0;allOptions.forEach(t=>{e+=parseFloat(t.pointsValue)}),e!=pointsModal?allOptions.forEach(e=>{e.correctPercentage=!1}):allOptions.forEach(e=>{e.correctPercentage=!0}),allOptions.forEach(e=>{if(!1===e.correctPercentage){ONE_ELEMENT("#optionDefaultChecklist"+e.id).querySelectorAll("input")[1].classList.add("input-danger")}else{ONE_ELEMENT("#optionDefaultChecklist"+e.id).querySelectorAll("input")[1].classList.remove("input-danger")}})}ONE_ELEMENT("#btnSave").addEventListener("click",()=>{if(ONE_ELEMENT(".alert-header").classList.add("d-none"),allValidations(defaultChecklistArray)){ONE_ELEMENT("#default_checklist_json").value=JSON.stringify(defaultChecklistArray);let e=[];defaultChecklistArray.forEach(t=>{e.push(t.name)}),ONE_ELEMENT("#checklist_names").value=e.join(","),ONE_ELEMENT("#lastIdIncrement").value=idIncrement,ONE_ELEMENT("#lastIdIncrementOption").value=idIndentOption,ONE_ELEMENT("#formChecklistsJson").submit()}}),ONE_ELEMENT("#btnFinish").addEventListener("click",()=>{ONE_ELEMENT(".alert-header").classList.add("d-none"),allValidations(defaultChecklistArray)&&(ONE_ELEMENT("#default_checklist_json_oficial").value=JSON.stringify(defaultChecklistArray),ONE_ELEMENT("#allChecklists").value=JSON.stringify(defaultChecklistArray),ONE_ELEMENT("#lastIdIncrementOficial").value=idIncrement,ONE_ELEMENT("#lastIdIncrementOptionOficial").value=idIndentOption,ONE_ELEMENT("#formChecklists").submit())});const ERROR_EMPTY_INPUTS=1,ERROR_SELECT_VALUE=2,ERROR_PERCENTAGE=3,ERROR_SUBCHECKLIST_FATHER=4,ERROR_EMPTY_DOUBLE_OPTIONS=5,ERROR_EMPTY_OPTIONS=6,ERROR_OPTIONS_PERCETAGE=7,ERROR_GROUPING=8;function allValidationsLayout(e,t){let l=ONE_ELEMENT("#defaultCheck"+e.id);if(1===t){let t=l.querySelectorAll("input");""===t[0].value&&t[0].classList.add("input-danger"),""===t[1].value&&null!==e.idDefaultChecklist&&t[1].classList.add("input-danger"),""===t[2].value&&t[2].classList.add("input-danger")}2===t&&l.querySelector("select").classList.add("input-danger"),4===t&&l.classList.add("input-danger"),5!==t&&6!==t&&7!==t||l.querySelector(".btnAddOptions").classList.add("input-danger"),8===t&&l.querySelector(".btnAddDefaultChecklist").classList.add("input-danger");let n=ONE_ELEMENT(".alert-header");n.classList.remove("d-none");let i=n.getBoundingClientRect();window.scrollBy(i.x,i.y-60),n.querySelector(".alert").innerHTML=["","Há campos obrigatórios das checklist que não foram preenchidos!","Há checklists que não foram definidas seu tipo!","Há checklists que suas pontuações estão desiguais!","Há checklists principais que precisam das subchecklists!","Há checklists do tipo (dupla escolha) sem opções!","Há checklists do tipo (multiplas escolhas) sem opções!","Há checklists do tipo (multiplas escolhas) com a porcentagem incorreta!","Há checklists do tipo (agrupamento) que precisam ter pelo menos uma subchecklist!"][t]}function allValidations(e){let t="",l=[],n=!1,i=0;return e.forEach(e=>{if(""!==e.name&&""!==e.percentage&&""!==e.points||(l.push(1),t=e),""===e.typechecklist&&null!==e.idDefaultChecklist&&(l.push(2),t=e),!1===e.correctPercentage&&(l.push(3),t=e),null===e.idDefaultChecklist&&0===e.subchecklists.length&&(l.push(4),t=e),"0"!==e.typechecklist&&"7"!==e.typechecklist||0===e.subchecklists.length&&(l.push(8),t=e),"3"===e.typechecklist){e.options.length<1&&(l.push(6),t=e),e.options.forEach(n=>{!1===n.correctPercentage&&(l.push(7),t=e)})}if("4"===e.typechecklist){2!=e.options.length&&(l.push(5),t=e)}0===i&&(0===l.length?n=!0:(n=!1,i++)),l!=[]&&t.id===e.id&&(l.forEach(t=>{allValidationsLayout(e,t)}),l=[]),e.subchecklists.length>0&&(n=allValidations(e.subchecklists))}),n}